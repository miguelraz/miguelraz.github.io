<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=icon  href="/assets/favicon.ico" type="image/x-icon"> <title>üöß WIP: üöß On Compilers and Warehouse Managers</title> <header> <div class=blog-name ><a href="">PathToPerformance</a></div> <nav> <ul> <li><a href="/">Welcome! üëãüèæ</a> <li><a href="/diary/">Diaryüìí</a> <li><a href="/blog/">Blogüí≠</a> <li><a href="/pubs/">Publications üìì /Talksüó£Ô∏è /Videosüé• </a> <li><a href="/teaching/">Teachingüéì/Translationsüó∫Ô∏è</a> <li><a href="/about/">CVüíÉ</a> <script src="/libs/clipboard.js"></script> </ul> <img src="/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class=franklin-content ><h2></h2> <h3 id=reading_time_15_minutes ><a href="#reading_time_15_minutes" class=header-anchor >Reading time: 15 minutes</a></h3> <h3 id=summary ><a href="#summary" class=header-anchor >Summary:</a></h3> <p>As a soon-to-be physicist, there&#39;s nothing I value more than a useful lie. A story that&#39;s simple, captivating, and a good builder for intuition that can last for years ‚Äì those are the lies that I like. I also like to code in the Julia programming language, and I get very excited talking about very intricate technical details to supportive friends and helpless victims. Not many of my friends and family are into computers, which means I have to come up with great ~~lies~~ stories to talk about compiler optimizations with other people. </p> <h1 id=alas_i_will_talk_about_warehouse_managers_and_hope_that_you_dear_reader_will_enjoy_the_ride_and_catch_my_drift ><a href="#alas_i_will_talk_about_warehouse_managers_and_hope_that_you_dear_reader_will_enjoy_the_ride_and_catch_my_drift" class=header-anchor >Alas, I will talk about &quot;warehouse managers&quot; and hope that you, dear reader, will enjoy the ride and catch my drift.</a></h1> <p>This is a story that I&#39;ve told myself &#40;and others&#41; in order to make sense of what the hell a compiler is supposed to do in the best way I know how: by just <em>lying about it</em>, but in a plausibly-deniable, convenient sort of way, until I you can learn to measure otherwise. </p> <p>All imprecisions are my fault, but it is my hope that where I miss the mark, you get a working mental model of how some of these compiler things work. </p> <p>My <strong>useful lie</strong> for the rest of this post is that compilers just make plans to move boxes of bits around, not completely unlike a &quot;warehouse manager&quot; who must handle daily orders and boxes coming in and out of their warehouse. </p> <p>That&#39;s <em>it</em>, that&#39;s my post.</p> <p>It is my deep held conviction that compilers are explainable to curious children, if one is patient and willing to help the listener build the right <a href="https://www.youtube.com/watch?v&#61;_ahvzDzKdB0">language for it</a>. Guy Steele explained Operating Systems in monosyllables in the previous link, and <a href="https://twitter.com/TartanLlama/status/1460608706048106501">Sy Brand helped me understand monads with cats in under 2 minutes.</a> ‚Äì or at least the gist of it, which is enough for me right now. Both of them are the inspiration for this post and worth your time, so here&#39;s my own hand in this endeavor.</p> <hr /> <p><strong>Note:</strong> There&#39;s a spoiler about all the technical terms at the end if you want to keep going down the rabbit hole, because I&#39;m all about lowering all the gates and building all the bridges. And if you want to read oodles more, you can always <a href="https://github.com/sponsors/miguelraz/">sponsor me on GitHub</a> to keep the blog rolling along. ‚Äì‚Äì </p> <h3 id=the_warehouse ><a href="#the_warehouse" class=header-anchor >The warehouse</a></h3> <p>First day at the new gig.</p> <p>You heard it used to be a shoe strings factory, but they retrofitted the place to become the <code>Silly Cones Clearing Warehouse</code>. </p> <p>Right, you forgot they&#39;re terrible at naming things here.</p> <p>You&#39;re hailed by a friendly supervisor who kindly gives you the run of the place. They&#39;re called Ash<sup id="fnref:1"><a href="#fndef:1" class=fnref >[1]</a></sup>, and they help everyone get setup and working with each other.</p> <p>Your job description says you&#39;re a &quot;compiler/interpreter&quot;. The supe says it&#39;s both are just moving boxes around, but your workload will vary widely based on your worksheet details and client specifications.</p> <blockquote> <p>There&#39;s basically two shift styles here - lemme show you how the old guard does it first.</p> </blockquote> <p>You nod and follow them to meet the compiler crew.</p> <p>You first met Cece<sup id="fnref:2"><a href="#fndef:2" class=fnref >[2]</a></sup>. Everyone seems to have started training with Cece at some point, for better or for worse. Cece tells you that you&#39;re job is quite simple:</p> <blockquote> <p>Here&#39;s the gig kiddo: We have tons of clients orders in-flight all the time. Their orders are shipping boxes, and they go through our warehouse centers. Some clients ask for small deliveries - like a toothbrush - and those fit in those smallest boxes in that register behind ya. There&#39;s not many of those but they&#39;re the easiest and closest. Once that order makes it into the van in the docking bay, you get them all back from the stack over there. </p> </blockquote> <p>&quot;So I&#39;m moving knick-knacks all day? Just from our processing unit to the bay?&quot;</p> <blockquote> <p>Huh, we wish. Those are the small fish. We also get orders for shipping containers that are getting backlogged all over the east coast nowadays - we have to accommodate them all.</p> </blockquote> <p>&quot;What?&quot;</p> <blockquote> <p>Yeah, happens all day.</p> </blockquote> <p>&quot;But shipping containers don&#39;t fit in these toothbrush boxes Cece.&quot;</p> <blockquote> <p>Well, that&#39;s why I always ask everyone upfront for the size of everything their sending. If they don&#39;t send me a detail sheet, I just send it back. Oh right ‚Äì a detail sheet means that everything the client wants to move through this warehouse must have a specified box size. There&#39;s forms behind you to check that all the items actually fit in the boxes they say.</p> </blockquote> <p>&quot;You always do this manually?&quot;</p> <blockquote> <p>It&#39;s worked for me, and it&#39;s good you start learning it too, it&#39;s as close to understanding how this warehouse works as you&#39;ll get. Just remember - at Silly Cones, if you ever need more boxes, we can always get more rackspace, you just need to make the paperwork. We have tons of space, but it&#39;s out of town, so your orders will be delayed while we move the stuff back here.</p> </blockquote> <p>You sigh at the thought of filling all these forms for boxes by hand all the time, but it&#39;s lunch break already.</p> <p><hr /> You spend a few weeks with Cece and you get good at what you do. Cece takes particular delight in packing the structures compactly and not wasting more boxes than what they deem necessary; that, they claim, is the ultimate crime. You keep noticing however, that CeCe definitely fudges some of the form sheets - some boxes are just filled with the wrong name, names get overwritten, stuff spills out when it doesn&#39;t fit in the boxes the client asked for and then a few hours of everyone&#39;s time is wasted picking up the mess. Credit where it&#39;s due - some clients ask exclusively for CeCe and are used to his manual and error-prone ways, something about the devil they know...</p> <p>Cece was also devilishly brief about what your assignment <em>actually</em> meant &#40;Cece has a knack for understating complexity&#41;. See, some of these boxes sometimes have a tracking code on the side, and so you have to go and find the box in the warehouse that that the tracking code is referring to, because that&#39;s where your items are actually stored. On the happy days, you get a full detail sheet of all the concrete things you gotta haul, but boy when you have to unbox everything and drag it around... it&#39;s not fun, or fast AND you have to go back and forth from the form sheets the client gave you and manage the tracking codes manually. You guess it&#39;s the price of admission into this gig and hunker on.</p> <p>Ash has kept coming around and chatting with you, asking how the box packing is treating you and if you like working close to the metal. </p> <blockquote> <p>Hey, you should come with me to bikeshed, there&#39;s a person you should meet.</p> </blockquote> <p>You&#39;re on your lunch break and could use a break from stamping forms as <code>null</code> so you take Ash up.</p> <p>Ash presents you to Rusty<sup id="fnref:3"><a href="#fndef:3" class=fnref >[3]</a></sup>, also a part of the compilers team. He&#39;s fixing his bike chain and hasn&#39;t taken the helmet high-visibility vest off.</p> <blockquote> <p>Nice to meet you&#33; </p> </blockquote> <p>He says. He asks about your last few weeks with Cece and groans at all the manual paperwork.</p> <blockquote> <p>... boy have I been there - I&#39;ve told Cece a million times that&#39;s no way to live. If only he&#39;d plan a little...</p> </blockquote> <p>Rusty is very enthusiastic about workplace safety and definitely sounds like a fun guy. Rusty started out with Cece but got tired of all the potential accidents and mishaps on the main floor and had to come up with a system.</p> <blockquote> <p>It&#39;s like a hall pass system for the orders that are coming in - Only one person can hold the permission slip for the order boxes they&#39;re touching at the time. That way, no one can mess up anyone else&#39;s orders.</p> </blockquote> <p>Rusty has a smaller working space than Cece, and it takes him a bit longer to work through the form sheets with this added ownership slip system, but he says he never has to worry about all the crap that Cece is used to.</p> <p>Your lunch break is over and you start scuttling back to your station as you write something he mumbles about &quot;making errors unrepresentable&quot; and <a href="https://www.youtube.com/watch?v&#61;A3AdN7U24iU">train emergency breaks</a> or something. Rusty really talks <strong>fast</strong> and seems to love trains. <strong>Loves</strong> them.</p> <hr /> <p>You&#39;ve been clearing oodles of orders with the Rusty system for a few weeks now and Ash rolls around again. Ash says you&#39;re not going to improve much if you don&#39;t learn from how other people work at the warehouse, and that your next rotation is with the &quot;interpreter&quot; camp. </p> <p><table class=fndef  id="fndef:1"> <tr> <td class=fndef-backref ><a href="#fnref:1">[1]</a> <td class=fndef-content ><code>Ash</code> is supposed to be <code>bash</code> the languages used to install stuff and compile/run programs from your terminal. </table> <table class=fndef  id="fndef:2"> <tr> <td class=fndef-backref ><a href="#fnref:2">[2]</a> <td class=fndef-content ><code>Cece</code> is supposed to be the <code>C</code> programming language, because in <code>make</code> scripts it&#39;s the name of the C compiler variable <code>CC&#61;gcc</code> or something like that. His manual style of asking for all sizes upfront is indicative of a compiled programming language - They can be fast, and waste little space. </table> <table class=fndef  id="fndef:3"> <tr> <td class=fndef-backref ><a href="#fnref:3">[3]</a> <td class=fndef-content ><code>Rusty</code> </table> </p> <div class=page-foot > <div class=copyright > &copy; Miguel Raz Guzm√°n Macedo. Last modified: January 19, 2022. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "efaaeb52e1314322a75ffd9edd8d1566"}'></script> </div> </div> </div>