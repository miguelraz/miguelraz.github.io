<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <!--<link rel=stylesheet  href="/libs/highlight/github.min.css"> --> <link rel=stylesheet  href="/libs/highlight/styles/atom-one-dark.css"> <script src="libs/clipboard.min.js"></script> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=icon  href="/assets/favicon.ico" type="image/x-icon"> <title>The Grind</title> <header> <div class=blog-name ><a href="">PathToPerformance</a></div> <nav> <ul> <li><a href="/">Welcome! üëãüèæ</a> <li><a href="/diary/">Diaryüìí</a> <li><a href="/blog/">Blogüí≠</a> <li><a href="/pubs/">Publications üìì /Talksüó£Ô∏è /Videosüé• </a> <li><a href="/teaching/">Teachingüéì/Translationsüó∫Ô∏è</a> <li><a href="/about/">CVüíÉ</a> <script src="/libs/clipboard.js"></script> </ul> <img src="/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class=franklin-content ><h1 id=virtual_diary_for_progress_on_all_fronts ><a href="#virtual_diary_for_progress_on_all_fronts" class=header-anchor >Virtual diary for progress on all fronts</a></h1> <h3 id=05062021 ><a href="#05062021" class=header-anchor >05/06/2021</a></h3> <ol start=162 > <li><p><a href="https://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html">Introduction to Undefined Behaviour</a> and a blog post by <a href="https://blog.regehr.org/archives/213">John Regehr</a> - time to grok some of this nonsense.</p> </ol> <ul> <li><p><code>for&#40;int i &#61; 0; i &lt;&#61; N; i&#43;&#43;&#41; &#123;...&#125;</code> if overflow is UB, then the compiler can assume the loop stops in at most <code>N&#43;1</code> iterations &#40;because if <code>N &#61;&#61; INT_MAX</code>, the loop may be infinite&#33;&#41;</p> <li><p>Oh damn, the first post is by Chris Lattner, author of LLVM o.0</p> </ul> <h3 id=04062021 ><a href="#04062021" class=header-anchor >04/06/2021</a></h3> <ol start=159 > <li><p><code>Jubilee</code> recommends capturing mutation to smaller scopes in Rust instead of the C-ish idiom of mutation everywhere:</p> </ol> <pre><code class=language-rust >let mut i &#61; 0;
    while i &lt; N &#123;
        let d2s &#61; f64x2::from_array&#40;&#91;
            &#40;r&#91;i&#93; * r&#91;i&#93;&#41;.horizontal_sum&#40;&#41;,
            &#40;r&#91;i &#43; 1&#93; * r&#91;i &#43; 1&#93;&#41;.horizontal_sum&#40;&#41;,
        &#93;&#41;;
        let dmags &#61; f64x2::splat&#40;dt&#41; / &#40;d2s * d2s.sqrt&#40;&#41;&#41;;
        mag&#91;i&#93; &#61; dmags&#91;0&#93;;
        mag&#91;i &#43; 1&#93; &#61; dmags&#91;1&#93;;
        i &#43;&#61; 2;
    &#125;</code></pre> <p>Can be converted to </p> <pre><code class=language-rust >for i in &#40;0..N&#41;.step_by&#40;2&#41; &#123;
        let d2s &#61; f64x2::from_array&#40;&#91;
            &#40;r&#91;i&#93; * r&#91;i&#93;&#41;.horizontal_sum&#40;&#41;,
            &#40;r&#91;i &#43; 1&#93; * r&#91;i &#43; 1&#93;&#41;.horizontal_sum&#40;&#41;,
        &#93;&#41;;
        let dmags &#61; f64x2::splat&#40;dt&#41; / &#40;d2s * d2s.sqrt&#40;&#41;&#41;;
        mag&#91;i&#93; &#61; dmags&#91;0&#93;;
        mag&#91;i &#43; 1&#93; &#61; dmags&#91;1&#93;;
    &#125;</code></pre> <ol start=160 > <li><p>To run <code>cargo watch</code> on a non-standard file, use <code>cargo watch -c -x &quot;run --examples dot_product&quot;</code>. Credit to <code>Lokathor</code>.</p> <li><p>Finally got the code working for the <code>dot_product.rs</code>&#33; in the end, it wasn&#39;t so scary:</p> </ol> <pre><code class=language-rust >#&#33;&#91;feature&#40;array_chunks&#41;&#93; // gotta have this
fn dot&#40;a: &amp;&#91;f32&#93;, b: &amp;&#91;f32&#93;&#41; -&gt; f32 &#123;
    a.array_chunks::&lt;4&gt;&#40;&#41; // el paso de la muerte
    .map&#40;|&amp;a| f32x::from_array&#40;a&#41;&#41;
    .zip&#40;b.array_chunks::&lt;4&gt;&#40;&#41;.map&#40;|&amp;b| f32x4::from_array&#40;b&#41;&#41;&#41; // so aside form some ugly conversions all is peachy
    .map&#40;|&#40;a,b&#41;| &#40;a * b&#41;.horizontal_sum&#40;&#41;&#41;
    .sum&#40;&#41;
&#125;</code></pre> <h3 id=03062021 ><a href="#03062021" class=header-anchor >03/06/2021</a></h3> <ol start=155 > <li><p>Rust syntax for updating structs with <code>..other_struct</code> is very neat.</p> <li><p><code>if let Some&#40;word&#41; &#61; ... &#123;&#125;</code></p> <li><p><code>while let Some&#40;Some&#40;word&#41;&#41; &#61; ... &#123;&#125;</code></p> <li><p><code>cargo watch -c</code> is very useful for seeing how you&#39;re code is going&#33; Credit to <code>Lokathor</code> for the <code>-c</code> flag.</p> </ol> <h3 id=31052021 ><a href="#31052021" class=header-anchor >31/05/2021</a></h3> <ol start=152 > <li><p><code>make -C debug</code> julia builds are much faster to build because you are not optimizing anymore - hat tip to Jameson Nash for that.</p> <li><p>LLVM trap is what calls unreachable - tells the runtime that this should never happen. Basically checking that codegen didn&#39;t screw up.</p> <li><p><code>git add -u</code> </p> </ol> <h3 id=30052021 ><a href="#30052021" class=header-anchor >30/05/2021</a></h3> <ol start=151 > <li><p>Finally got the hang of the Rust <code>dbg&#33;</code> macro:</p> </ol> <pre><code class=language-rust >let a &#61; 2;
let b &#61; dbg&#33;&#40;a * 2&#41; &#43; 1;
//      ^-- prints: &#91;src/main.rs:2&#93; a * 2 &#61; 4
assert_eq&#33;&#40;b, 5&#41;;</code></pre> <p>Very useful for the competitive problems debugging&#33;</p> <h3 id=27052021 ><a href="#27052021" class=header-anchor >27/05/2021</a></h3> <ol start=145 > <li><p>Finally got around to the <code>nucleotide</code> in Rust exercism. My solution was a bit C-ish, this is neater: &#40;Credits to <code>azymohliad</code>, but with no <code>Err</code>&#41;</p> </ol> <pre><code class=language-rust >fn count&#40;c:char, dna: &amp;str&#41; -&gt; usize &#123;
    dna.chars&#40;&#41;.filter&#40;|&amp;x| x &#61;&#61; c&#41;.count&#40;&#41;
&#125;

fn nucleotide_counts&#40;dna: &amp;str&#41; -&gt; HashMap&lt;char, usize&gt; &#123;
    &quot;ACGT&quot;.chars&#40;&#41;.map&#40;|c| &#40;c, count&#40;c, dna&#41;&#41;&#41;.collect&#40;&#41;
&#125;</code></pre> <p>Another clever initialization trick by <code>jtmueller</code>:</p> <pre><code class=language-rust >let mut counts: HashMap&lt;char, usize&gt; &#61; &#91;&#39;A&#39;, &#39;C&#39;, &#39;T&#39;, &#39;G&#39;&#93;.iter&#40;&#41;.map&#40;|n| &#40;*n, 0&#41;&#41;.collect&#40;&#41;;</code></pre>
<p>Probs worth using <code>HashMap::with_capacity&#40;4&#41;</code> since I know there&#39;s only <code>ACTG</code> as keys.</p>
<ol start=147 >
<li><p>Rust: <code>use enum::*;</code>, and then you don&#39;t need to <code>enum::foo</code> all over your match arms&#33;</p>

<li><p>I learned about the <code>slice.windows&#40;2&#41;</code> function in the <code>sublist</code> exercise, <a href="https://doc.rust-lang.org/std/primitive.slice.html#method.windows">link here</a></p>

</ol>
<pre><code class=language-rust >let slice &#61; &#91;&#39;r&#39;, &#39;u&#39;, &#39;s&#39;, &#39;t&#39;&#93;;
let mut iter &#61; slice.windows&#40;2&#41;;
assert_eq&#33;&#40;iter.next&#40;&#41;.unwrap&#40;&#41;, &amp;&#91;&#39;r&#39;, &#39;u&#39;&#93;&#41;;
assert_eq&#33;&#40;iter.next&#40;&#41;.unwrap&#40;&#41;, &amp;&#91;&#39;u&#39;, &#39;s&#39;&#93;&#41;;
assert_eq&#33;&#40;iter.next&#40;&#41;.unwrap&#40;&#41;, &amp;&#91;&#39;s&#39;, &#39;t&#39;&#93;&#41;;
assert&#33;&#40;iter.next&#40;&#41;.is_none&#40;&#41;&#41;;</code></pre>
<ol start=149 >
<li><p>Difference between <code>show</code> and <code>print</code>: <code>print</code> uses quotes around the string, <code>show</code> doesn&#39;t, and this </p>

<li><p>Rust: <code>map.entry&#40;letter&#41;.or_insert&#40;0&#41;&#41; &#43;&#61; 1</code></p>

</ol>
<h3 id=26052021 ><a href="#26052021" class=header-anchor >26/05/2021</a></h3>
<ol start=144 >
<li><p>FINALLY GOT THE ASSEMBLY HELLO WORLD TO WORK&#33;</p>

</ol>
<ul>
<li><p>I had to disable the <code>stdfaxh.h</code> whatever</p>

<li><p>This was the final command:</p>

</ul>
<pre><code class=language-bash >&#91;I&#93; mrg@JuliaLap ~/p/a/m/C/Ch02_01 &#40;master&#41;&gt; nasm -f elf64 Ch02_01.asm
&#91;I&#93; mrg@JuliaLap ~/p/a/m/C/Ch02_01 &#40;master&#41;&gt; g&#43;&#43; Ch02_01.cpp Ch02_01.o
&#91;I&#93; mrg@JuliaLap ~/p/a/m/C/Ch02_01 &#40;master&#41;&gt; ./a.out</code></pre>
<ul>
<li><p>and the assembly file was:</p>

</ul>
<pre><code class=language-asm >;-------------------------------------------------
;               Ch02_01.asm
;-------------------------------------------------

; extern &quot;C&quot; int IntegerAddSub_&#40;int a, int b, int c, int d&#41;;

;        .code
;IntegerAddSub_ proc
	global IntegerAddSub_
	section .text
; Calculate a &#43; b &#43; c - d
IntegerAddSub_:
        mov eax,ecx                         ;eax &#61; a
        add eax,edx                         ;eax &#61; a &#43; b
        add eax,r8d                         ;eax &#61; a &#43; b &#43; c
        sub eax,r9d                         ;eax &#61; a &#43; b &#43; c - d

        ret                                 ;return result to caller
;IntegerAddSub_ endp
;        end</code></pre>
<ul>
<li><p>So I just had to add the <code>global IntegerAddSub_</code>, <code>section .text</code> below that, the name of the function as a section, and the last <code>ret</code> to follow <code>nasm</code> conventions.</p>

</ul>
<h3 id=24052021 ><a href="#24052021" class=header-anchor >24/05/2021</a></h3>
<ol start=138 >
<li><p>Made a 3D print of dispatch with my sister. It was an awesome birthday.</p>

<li><p>Got DoctorDocstrings.jl Poster and Rubin.jl Lightning talk accepted to JuliaCon&#33; Now to work on those asap...</p>

<li><p>Got the Kusswurm <code>Modern x86 Assembly Language Programming</code> and Min-Yih Hsu <code>LLVM Techniques</code> books in the mail now...</p>

<li><p>Should write down the Next steps for MMTK - a written down goal is usually an easier one. </p>

<li><p>üöÄ üíÉ To setup emojis, we can insert with <code>SPC i e</code>, but the line editor gets a bit funky...?</p>

<li><p>Found this incredibly useful <a href="https://gist.github.com/hjertnes/9e14416e8962ff5f03c6b9871945b165">Doom emacs tips</a>, and <a href="https://gist.github.com/dmsul/8bb08c686b70d5a68da0e2cb81cd857f">this vim guide</a></p>

</ol>
<h3 id=21052021 ><a href="#21052021" class=header-anchor >21/05/2021</a></h3>
<ol start=137 >
<li><p>Finally remembered to setup <code>mu</code>. Let&#39;s <a href="https://www.sastibe.de/2021/01/setting-up-emacs-as-mail-client/">see if I can finally do it...</a></p>

</ol>
<h3 id=18052021 ><a href="#18052021" class=header-anchor >18/05/2021</a></h3>
<ol start=135 >
<li><p>Vim tricks from Emacs doom&#33; RTFM to change the font to Julia mono&#33;</p>

</ol>
<ul>
<li><p><code>cc</code> in vim mode will let you change the whole line&#33; </p>

<li><p><code>C</code> changes to the end of the line&#33;</p>

<li><p><code>*</code> to highlight all copies of the word under the cursor</p>

<li><p><code>~</code> to change the case of a letter, <code>&#91;#&#93;~</code> to change # chars after the letter under cursor. <code>g~&#91;m&#93;</code>, <code>gU&#91;m&#93;</code> <code>gu&#91;m&#93;</code> toggle cases with motion <code>&#91;m&#93;</code></p>

<li><p><code>&gt;&#91;m&#93;</code> to toggle case with motion <code>&#91;m&#93;</code>, <code>&gt;&gt;</code> to indent this line</p>

<li><p><code>J</code> to move line beneath to end of this one</p>

<li><p><code>gq&#91;m&#93;</code> format text between here and <code>&#91;m&#93;</code>, <code>gqq</code> formats current line</p>

<li><p><em>Marks</em>: <code>ma</code> sets a mark</p>

<li><p><code>&#39;</code> and <code>&#39;&#39;</code> to set a mark and jump back and forth between them</p>

</ul>
<ol start=136 >
<li><p>Kevin Bonham is helping me figure out the Emacs tabbing situation:</p>

</ol>
<pre><code class=language-julia >*Me*
Alright, I&#39;m tired of never knowing how to work buffers or tabs or windows inside my doom emacs.
Who&#39;s got a good crash course?
My ideal goal is to:

1. Be able to open multiple buffers and move between them
2. Be able to set groups of tabs with different buffers
3. Be able to &quot;restore&quot; groups of tabs when starting up emacs.

*Kevin Bonham*
I&#39;ve just been figuring this out myself...

1. SPC b b to switch buffers in the same window &#40;assuming you&#39;ve opened them before with SPC . or something.
    SPC w J &#40;note the capital&#41; will move the current buffer into a new window below &#40;can also use H, K, or L&#41; as last arg to do left, up, or right&#41;.
    Then do the same thing but lowercase to move focus around to different windows
2. SPC TAB has all of the tab-related things. SPC TAB n does new tab, SPC TAB r renames it, SPC TAB 1 to switch to tab 1 etc.
3. SPC p has all of the &quot;project&quot; related stuff. I haven&#39;t played a lot with these, but they seem to all be linked to a directory, though I think if you have outside files open, they will re-open with the project</code></pre>
<h3 id=17052021 ><a href="#17052021" class=header-anchor >17/05/2021</a></h3>
<ol start=134 >
<li><p>Wow-BOB-Wow has some nifty Rust tricks:</p>

</ol>
<pre><code class=language-rust >pub fn sum_of_multiples&#40;limit: u32, factors &amp;&#91;u32&#93;&#41; -&gt; u32 &#123;
	&#40;1..limit&#41;.filter&#40;|i| factors.iter&#40;&#41;.any&#40;|f| i &#37; f &#61;&#61; 0&#41;&#41;.sum&#40;&#41;
&#125;</code></pre>
<ul>
<li><p>For <code>perfect-numbers</code> don&#39;t forget it might be easier to match on </p>

</ul>
<pre><code class=language-rust >match x.cmp&#40;n&#41; &#123;
    Ordering::Greater &#61;&gt; Some&#40;Classification::Abundant&#41;,
	...
&#125;</code></pre>
<h3 id=15052021 ><a href="#15052021" class=header-anchor >15/05/2021</a></h3>
<ol start=133 >
<li><p>1.7 goodies&#33; You can destructure structs with named tuples&#33;</p>

</ol>
<pre><code class=language-julia >&#40;; a, b&#41; &#61; x # destructures props &#96;a&#96; and &#96;b&#96; of &#96;x&#96;</code></pre>
<p>Can also be used like:</p>
<pre><code class=language-julia >struct A
	x
	y
end

foo&#40;&#40;; x, y&#41;::A&#41; &#61; x &#43; y # ermahgerddd</code></pre>
<p><code>@test</code> can now be passed as an additional argument <code>skip</code> and <code>broken</code>:</p>
<pre><code class=language-julia >@test isequal&#40;complex&#40;one&#40;T&#41;&#41; / complex&#40;T&#40;Inf&#41;, T&#40;-Inf&#41;&#41;, complex&#40;zero&#40;T&#41;, zero&#40;T&#41;&#41;&#41; broken&#61;&#40;T &#61;&#61; Float64&#41;</code></pre>
<ul>
<li><p>You can also now iterate on a <code>RegexMatch</code> to get its captures&#33;</p>

<li><p><code>Base.@invoke f&#40;arg1::T1, arg2::T2; kwargs...&#41;</code> now resembles the <code>@ccall</code> syntax.</p>

<li><p>Multidimiensional array syntax&#33;</p>

</ul>
<pre><code class=language-julia >&#91; 1; 2 ;; 3 ; 4 ;; 5 ; 6 ;;; 7 ; 8 ;; 9 ; 10 ;; 11 ; 12&#93;</code></pre>
<h3 id=14052021 ><a href="#14052021" class=header-anchor >14/05/2021</a></h3>
<ol start=131 >
<li><p>When making a PR to BinaryBuilder.jl, search the whole repo to make sure no one has tried building <code>jemalloc</code> before :upside-down: üéâ</p>

<li><p>Julia doesn&#39;t ship binaries yet, but <a href="https://www.ic.unicamp.br/~ra045840/bolt-cgo19.pdf">BOLT</a> could be worth looking into.</p>

</ol>
<h3 id=13052021 ><a href="#13052021" class=header-anchor >13/05/2021</a></h3>
<ol start=129 >
<li><p>Micket in the Julia chat has a nice answer for:</p>

</ol>
<p>&quot;How to do this neater?&quot;</p>
<pre><code class=language-julia >d &#61; Dict&#40;&quot;a&quot; &#61;&gt; 2, &quot;b&quot; &#61;&gt; 3&#41;
Dict&#40;zip&#40;keys&#40;d&#41;, map&#40;x -&gt; 2x, values&#40;d&#41;&#41;&#41;&#41;
# Do this&#33;
map&#33;&#40;x -&gt; 2x, values&#40;d&#41;&#41;
# Or this&#33;
Dict&#40; k &#61;&gt; 2v for &#40;k, v&#41; in d&#41;</code></pre>
<ol start=130 >
<li><p><code>aur/julia-bin</code> is a good wrapper for Julia on Arch. Thanks Mos√®&#33;</p>

</ol>
<h3 id=12052021 ><a href="#12052021" class=header-anchor >12/05/2021</a></h3>
<ol start=128 >
<li><p>If you append a julia Markdown bloc with <code>&#61;</code> you get line numbers on HackMD.</p>

</ol>
<pre><code class=language-julia >3 &#43; 3</code></pre>
<h3 id=11052021 ><a href="#11052021" class=header-anchor >11/05/2021</a></h3>
<ol start=123 >
<li><p>Fortran learnings&#33;</p>

<li><p>Fortran people <a href="https://developer.nvidia.com/blog/accelerating-fortran-do-concurrent-with-gpus-and-the-nvidia-hpc-sdk/">have nice parallelism</a> concerns.</p>

</ol>
<pre><code class=language-fortran >do concurrent&#40;i &#61; 1:N&#41;
    i0 &#61; max&#40;i - 1, 1&#41;
    i1 &#61; min&#40;i &#43; 1, N&#41;
    b&#40;:, :, 1&#41; &#61; 0.5 * &#40;a&#40;:, :, i0&#41; &#43; a&#40;:, i1&#41;&#41; &#33; array assignment
end do</code></pre>
<p>Can already be sent to Tesla GPUs o.O</p>
<ol start=2 >
<li><p>In fortran, <code>functions</code> are <code>pure</code>, <code>subroutines</code> modify their arguments.</p>

<li><p>To make a struct, it probably suffices that</p>

</ol>
<pre><code class=language-fortran >type :: t_point
    real :: x
    real :: y
end type</code></pre>
<p>And you access it with</p>
<pre><code class=language-fortran >type&#40;t_point&#41; :: mypoint
mypoint&#37;x &#61; 1.0
mypoint&#37;y &#61; 2.0</code></pre>
<ol start=4 >
<li><p>You can declare fields in the struct as <code>private, protected, allocatable&#91;dimension&#93;, pointer, codimension, contiguous, volatile, asynchronous</code>:</p>

</ol>
<pre><code class=language-fortran >type :: t_example
    integer, private:: i &#61; 0 &#33; hites it from use outside of the t_example scope. Default init is with i &#61; 0
    integer, protected :: i &#33; allowed access, but not definition outside of the scope
    real, allocatable, dimension&#40;:&#41; :: x
end type</code></pre>
<ol start=5 >
<li><p>You can <code>contains</code><em>type-bound procedures</em></p>

</ol>
<pre><code class=language-fortran >module m_shapes
implicit none
private
public t_square

type :: t_square
    real :: side
    contains
        procedure :: area
end type

contains
    real function area&#40;self
    class&#40;t_square&#41;, intent&#40;in&#41; :: self
    res &#61; self&#37;side**2
    end function
end module m_shapes</code></pre>
<ol start=124 >
<li><p>Peter Deffebach kindly helped me golf a really cool, <a href="https://twitter.com/miguelraz_/status/1392161937467731970">but simple task</a>:</p>

</ol>
<pre><code class=language-julia >using CSV, Glob
fs &#61; CSV.File.&#40;readdir&#40;glob&quot;*.csv&quot;&#41;&#41;</code></pre>
<p>Done&#33; You&#39;ve read all the files <code>fs</code> that are CSVs&#33;</p>
<pre><code class=language-julia-repl >julia&gt; using CSV, DataFrames, Glob;
julia&gt; files &#61; readdir&#40;glob&quot;*.csv&quot;&#41;;
julia&gt; reduce&#40;vcat, CSV.read&#40;file, DataFrame&#41; for file in files&#41;</code></pre>
<ol start=125 >
<li><p>Jacob Zelko has kindly <a href="">shared some tools for dev flow</a>:</p>

<li><p>vim FloatTerm instead of vim-slime, don&#39;t need to open a pane that way.</p>

<li><p><code>:MarkDownPreview</code> with <code>iamcoo/markdown-preview.nvim</code>.</p>

</ol>
<h3 id=10052021 ><a href="#10052021" class=header-anchor >10/05/2021</a></h3>
<ol start=121 >
<li><p>Tim Besard and Valentin Churavy kindly helped me out on the Julia users GPU call &#40;available on the julialang.org calendar&#41;.</p>

</ol>
<p>They noted a couple of good starting considerations:</p>
<ol>
<li><p>Try and have a function that maps to every single element in the GPU.</p>

<li><p>Implementing a simple moving average is a type of convolution - there&#39;s good tutorials on optimizing that <a href="http://alexminnaar.com/2019/07/12/implementing-convolutions-in-cuda.html">here</a> and <a href="https://developer.nvidia.com/blog/cuda-pro-tip-write-flexible-kernels-grid-stride-loops/">here</a>.</p>

</ol>
<h3 id=09052021 ><a href="#09052021" class=header-anchor >09/05/2021</a></h3>
<ol start=120 >
<li><p><code>git log -p -- path/to/file</code> will show you the commits you did to a file. Amazing&#33;</p>

</ol>
<h3 id=07052021 ><a href="#07052021" class=header-anchor >07/05/2021</a></h3>
<ol start=117 >
<li><p>To write the Unicode Character <code>U&#43;000A</code>, &#40;Hat tip to Mason Protter&#41;, try this:</p>

</ol>
<pre><code class=language-julia >Char&#40;0x000A&#41; |&gt; clipbaord</code></pre>
<p>Thanks to Dave MacMaho, we can also do</p>
<pre><code class=language-julia >&#39;\U1f638&#39;</code></pre>
<p>and get the Cat emoji :D</p>
<ol start=118 >
<li><p>Huh, forgot to add this nice pice of <code>@ccall</code> goodness from the <code>primecount_jll</code> stuff:</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; myprimecount&#40;x&#41; &#61; @ccall libprimecount.primecount_pi&#40;x::Clonglong&#41;::Clonglong
myprimecount &#40;generic function with 1 method&#41;

julia&gt; @time myprimecount&#40;1e8&#41;
  0.001004 seconds
5761455

julia&gt; @time myprimecount&#40;1e14&#41;
  0.149201 seconds
3204941750802</code></pre>
<ol start=119 >
<li><p>We&#39;re dunking on the Fortran gang because they&#39;re 8x slower on a <code>sin</code> <a href="https://fortran-lang.discourse.group/t/simple-summation-8x-slower-than-in-julia/1171/48">benchmark</a> :D</p>

</ol>
<p>I&#39;m glad I pulled out Steven Johnsons flags to cross compile a C lib to use it with <code>@ccall</code>:</p>
<pre><code class=language-julia >shell&gt; ls
cordic.c  cordic.h  cordic.html  cordic.sh

shell&gt; gcc -fPIC -O3 -xc -shared -o libcordic.so cordic.c

shell&gt; ls
cordic.c  cordic.h  cordic.html  cordic.sh  libcordic.so</code></pre>
<p>I pulled that from their announcement of hte Julia <a href="https://julialang.org/blog/2017/01/moredots/">broadcasting features</a> and the annex notebook <a href="https://julialang.org/assets/blog/moredots/More-Dots.ipynb">here</a>.</p>
<p>And here is how to call it:</p>
<pre><code class=language-julia-repl >julia&gt; function cordic_sine&#40;a&#41;

          cos &#61; Ref&#123;Float64&#125;&#40;0.0&#41;
          sin &#61; Ref&#123;Float64&#125;&#40;0.0&#41;

          # Ref: Excellent work by John Burkardt
          # https://people.sc.fsu.edu/~jburkardt/c_src/cordic/cordic.c
          # void cossin_cordic &#40; double beta, int n, double *c, double *s &#41;
          ccall&#40;&#40;:cossin_cordic, &quot;/home/mason/cordic/libcordic.so&quot;&#41;, Cvoid, &#40;Float64, Cint, Ref&#123;Float64&#125;, Ref&#123;Float64&#125;&#41;, a, 40, cos, sin&#41;

          return sin&#91;&#93;

       end
cordic_sine &#40;generic function with 1 method&#41;</code></pre>
<p>Basically, don&#39;t forget it&#39;s the ABSOLUTE PATH&#33;</p>
<h3 id=06052021 ><a href="#06052021" class=header-anchor >06/05/2021</a></h3>
<ol start=116 >
<li><p>Simeon Schaub pulled some fancy destructuring:</p>

</ol>
<pre><code class=language-julia >x &#61; &#91;1, 2, 3&#93;
x&#91;3&#93;, x&#91;1:2&#93;... &#61; x
@test x &#61;&#61; &#91;2, 3, 1&#93;</code></pre>
<h3 id=05052021 ><a href="#05052021" class=header-anchor >05/05/2021</a></h3>
<ol start=115 >
<li><p>WE GOT JEFF TO STREAM SMALL STRING OPTIMIZATION&#33;</p>

</ol>
<p>Small lessons:</p>
<ol>
<li><p>Big wieldy codebase? Work on one small, small change at a time. Cross bridges as you come to them.</p>

<li><p>Majority of strings don&#39;t need more than 128 bytes, so a single byte of addressing</p>

<li><p>Jeff uses <code>ack</code> for grepping the codebase</p>

<li><p>Before trying to compile, review your changes with a <code>git diff</code></p>

<li><p>When getting a segmentation fault after making your changes and running <code>make</code>, run a debug build to figure out what went wrong with <code>make debug -j4</code></p>

<li><p><code>gdb /usr/bin/julia-debug</code> starts gdb, then <code>cd base/; r --output-ji x compile.ji</code> or something like that.</p>

<li><p>If you change header files you have to rebuild everything</p>

<li><p>Bonus: There&#39;s a docker image to start Julia Int32.</p>

<li><p>Multithread the <code>compiler.ji</code> step: multithread the code generator, break up into more code units...</p>

<li><p>set a breakpoint on <code>jl_throw</code> to see where <code>gdb</code> goes wrong. then <code>r -J ../usr/lib/julia/corecompiler.ji --output-ji x sysimg.jl</code></p>

<li><p>rr magic: <code>rr record ../usr/bin/julia-debug -J ../usr/lib/julia/corecompiler.ji --output-ji x sysimg.jl</code>, then <code>rr replay</code>. <code>b jl_exceptionf</code> and then <code>rc</code> to &quot;reverse continue&quot; so that you can step backwards from what happened.</p>

<li><p>When an assertion fires, and you are in <code>gdb</code>, the location of the assertion in the source code is in frame 4, so, to jump to it you just start <code>gdb</code> and then <code>f 4</code>.&#40;Usually just using <code>d bt</code> to look at the backtrace and figure out from there where to go.</p>

<li><p>You can call lisp &#40;to reindent your emacs&#33;&#41; within the <code>gc.c</code> file&#33;</p>

<li><p>Hah, I clicked the moment of <a href="https://clips.twitch.tv/ExcitedSparklyTofuTheThing-I5DsaBoyOXcZ2KMw">triump&#33;</a></p>

<li><p><code>../julia runtests.jl strings</code> to run the string test suite.</p>

<li><p>Remembered about <code>ArgParse.jl</code>. Noice:</p>

</ol>
<pre><code class=language-julia >s &#61; ArgParseSettings&#40;&#41;
@add_arg_table&#33; s begin
    &quot;--opt1&quot;
        help &#61; &quot;an option with an argument&quot;
    &quot;--opt2&quot;, &quot;-o&quot;
        help &#61; &quot;another option with an argument&quot;
        arg_type &#61; Int
        default &#61; 0
    &quot;--flag1&quot;
        help &#61; &quot;an option without argument, i.e. a flag&quot;
        action &#61; :store_true
    &quot;arg1&quot;
        help &#61; &quot;a positional argument&quot;
        required &#61; true
end</code></pre>
<h3 id=05042021 ><a href="#05042021" class=header-anchor >05/04/2021</a></h3>
<ol start=114 >
<li><p>Don&#39;t forget to turn off <code>cpuscaling</code> when running your benchmarks&#33; Hat tip to <a href="https://twitter.com/skamille/status/1389731461893349380">Camille Fournier</a> for schooling a bunch of us on this one&#33;</p>

</ol>
<p><a href="https://nixcp.com/disable-cpu-frecuency-scaling/">From this link:</a> we can do:</p>
<pre><code class=language-bash >grep -E &#39;^model name|^cpu MHz&#39; /proc/cpuinfo</code></pre>
<p>To figure out if the number on the left is lower than the number on the right. That&#39;s costing speed&#33; if you install <code>cpupowerutils&#40;Centos/Debian&#41;/ cpufrequtils &#40;ubuntu / Debian&#41;</code> you can do:</p>
<pre><code class=language-bash >cpupower frequency-set -g performance</code></pre>
<h3 id=29042021 ><a href="#29042021" class=header-anchor >29/04/2021</a></h3>
<ol start=113 >
<li><p>Added a new recipe for <code>simdjson</code>. remember to add <code>supported_platforms&#40;; experimental &#61; true&#41;</code> to try and run thigns on the new Mac M1 and <code>julia_compat &#61; 1.6</code> to get the <code>cpuid</code> feature detection.</p>

</ol>
<p>As always, Mos√® helped tons. He rocks.</p>
<h3 id=28042021 ><a href="#28042021" class=header-anchor >28/04/2021</a></h3>
<ol start=112 >
<li><p>Como deshacer tu <a href="https://midu.dev/como-deshacer-el-ultimo-commit-git/">ultimo git commit</a></p>

</ol>
<pre><code class=language-bash >git reset --soft HEAD~1
git reset --hard HEAD~1
git commit --ammend -m &quot;este es el mensaje correcto&quot;
git add f.txt
git commit --ammend -m &quot;mensaje del commit&quot;
# Si esta pushed...
git revert 74a...</code></pre>
<h3 id=27042021 ><a href="#27042021" class=header-anchor >27/04/2021</a></h3>
<ol start=109 >
<li><p><code>launch&#61;false</code> config for <code>CUDA.jl</code> helps set <code>peakflops</code>. Current NVIDIA 860M sets clocks in about 5.6e11.</p>

<li><p>MichaelHatherly&#39;s <code>InteractiveErrors.jl</code> is amazing. I should add it to a growing list of REPL tools.</p>

<li><p><code>cd -</code> jumps you back to the last dir. Also found <a href="https://lib.rs/command-line-utilities">command line libs in Rust</a>:</p>

</ol>
<ul>
<li><p>exa, bat, git-tui, git-delta, hunter, and bandwhich</p>

<li><p><code>grex</code>, <code>navi</code>, and <code>typeracer</code>: use more often&#33;</p>

</ul>
<h3 id=22042021 ><a href="#22042021" class=header-anchor >22/04/2021</a></h3>
<ol start=107 >
<li><p>Finally reinstalled <code>CUDA.jl</code> stuff. Some good pointers:</p>

</ol>
<ul>
<li><p>install the <code>linuxXXX-headers</code> and <code>linuxXXX-nvidia</code> to get compat stuff, then <code>sudo pacman -Sy cuda</code> to get all the  goodies or <code>CUDA_full_jll</code>. Big thanks to Time Besard and the <code>#gpu</code> gang for the setup.</p>

<li><p>It&#39;s important to know the full memory model. Yupei Qi was very kind to recommend the <a href="https://www.nvidia.com/en-us/gtc/on-demand/">GTC On Demand videos</a> and this <a href="https://www.microway.com/download/whitepaper/NVIDIA_Maxwell_GM204_Architecture_Whitepaper.pdf">Architecture whitepaper</a></p>

<li><p>This is a good script to figure out the ideal launch config via the occupancy api &#40;üé© to Valentin Churavy &#41;</p>

</ul>
<pre><code class=language-julia-repl >julia&gt; using CUDA
julia&gt; function mykernel&#40;&#41;
         nothing
       end
mykernel &#40;generic function with 1 method&#41;
julia&gt; myconfig&#40;kernel&#41; &#61; &#40;@show kernel; &#40;threads&#61;1, blocks&#61;1&#41;&#41;
myconfig &#40;generic function with 1 method&#41;
julia&gt; @cuda config&#61;myconfig mykernel&#40;&#41;</code></pre>
<ul>
<li><p>It is <strong>critical</strong> to use the <code>nsys</code> profiler to figure out the full occupancy and the SMs in your systems. Ignore the CUDA cores, those are more marketing.<code>nsys launch julia</code> is very useful for getting this setup.</p>

</ul>
<ol start=108 >
<li><p>Put up StagedFilters.jl on Discord. With <code>LoopVectorization.jl</code>, we get up to 300x performance increase on some systems vs SciPy. I should make a release as I go forward</p>

</ol>
<ul>
<li><p>Roadmap: Add a GPU method, add calculating the derivatives in a single pass</p>

</ul>
<h3 id=20042021 ><a href="#20042021" class=header-anchor >20/04/2021</a></h3>
<ol start=105 >
<li><p>Ooops - turns out I didn&#39;t use a copy of <code>main</code> branch for the tutorials so someone has to update by hadn a bunch of stuff :&#40;&#40;&#40;&#40;</p>

<li><p><code>BinaryBuilder.supported_platforms&#40;exlclude &#61; Sys.islinux&#41;</code> - where have you been all this time?</p>

</ol>
<h3 id=18042021 ><a href="#18042021" class=header-anchor >18/04/2021</a></h3>
<ol start=104 >
<li><p>Great day&#33; Wrote the DataFrames.jl tutorials in Spanish, like 13 notebooks in a day. Vim skills paid off big time&#33;</p>

</ol>
<h3 id=14042021 ><a href="#14042021" class=header-anchor >14/04/2021</a></h3>
<ol start=102 >
<li><p>Almost clinching the BB recipe for <code>racket</code>. This will help build Herbie&#33; In BinaryBuilder.jl, Mos√® recommends, instead of </p>

</ol>
<pre><code class=language-bash >cp racket/bin/* &#36;&#123;prefix&#125;/
# try doing
cp -r racket/bin &#36;&#123;prefix&#125;/.</code></pre>
<ol start=103 >
<li><p>Possible TODO? Stefan posted on <a href="https://discourse.julialang.org/t/julia-is-eight-times-slower-than-go-on-numerical-scheme/59383/29?u&#61;miguelraz">Discourse</a>:</p>

</ol>
<blockquote>
<p>There‚Äôs an old issue to <a href="https://github.com/JuliaLang/julia/issues/964">allow type annotations on global variables</a>. <strong>This would be a great intro compiler project</strong> ‚Äî not trivial by any means, but relatively straightforward. The right approach would need to be discussed with the compiler team, but I suspect the it would be to associate a type with each global binding and automatically insert a type check at each global assignment and teach the compiler that it can assume that the type of each global access has the associated type. An untyped global would then have type Any, so all globals would work the same way. Some subtleties for usability: you‚Äôll want to at least allow redeclaring the same global with the same type so that code can be re-included interactively; you could also allow the type annotation to be made more restrictive since any code that‚Äôs already been generated with that assumption will still be correct; to be really fancy, one could add ‚Äúback edges‚Äù from global binding types to methods that use those globals and increase the world age / invalidate those methods, which would allow arbitrary re-declaration of type globals at the cost of recompiling any methods that accessed the global.</p>
</blockquote>
<h3 id=13042021 ><a href="#13042021" class=header-anchor >13/04/2021</a></h3>
<ol start=100 >
<li><p>Submitted GSoC app. Godspeed. Go go Rubin.jl&#33;</p>

<li><p>In BinaryBuilder.jl, <code>cd &#36;&#123;prefix&#125;/</code> is where all compilation targets are placed. </p>

</ol>
<p>Also, RTFM&#33; Specifically platform hijinks.</p>
<h3 id=11042021 ><a href="#11042021" class=header-anchor >11/04/2021</a></h3>
<ol start=98 >
<li><p>We got invited to give a conference talk at Alpine2021 because of a <a href="https://twitter.com/miguelraz_/status/1381041713725153283">tweet</a> I sent to Alpine&#39;s main dev, Ariadne Conill.</p>

</ol>
<p>Now to coordinate a cool talk/proposal with Mos√® and Elliot and show off cool Julia stuff.</p>
<ol start=99 >
<li><p>FINALLY got Lean4 working on VSCode. Still don&#39;t know how to use <code>nix</code> but oh well. Halfway through the manual, and this example was neat to grok:</p>

</ol>
<pre><code class=language-lean >def add1Times3FilterEven &#40;xs : List Nat&#41; :&#61;
	-- this
	--   List.filter &#40;. &#37; 2 &#61;&#61; 0&#41; &#40;List.map &#40;. * 3&#41; &#40;List.map &#40;. &#43; 1&#41; xs&#41;&#41;
	-- becomes this
	--   xs |&gt; List.map &#40;. &#43; 1&#41; |&gt; List.map &#40;. * 3&#41; |&gt; List.filter &#40;. &#37; 2 &#61;&#61; 0&#41;
	-- becomes THIS&#33;
	xs |&gt;.map &#40;. &#43; 1&#41; |&gt;.map &#40;. * 3&#41; |&gt;.filter &#40;. &#37; 2 &#61;&#61; 0&#41;</code></pre>
<p>In the same note: <code>x |&gt; f</code> in Lean is the same as <code>f &lt;| a</code>, which in Haskell means <code>f &#36; a</code>. Damn, that&#39;s some crappy ascii in Haskell :/</p>
<h3 id=08042021 ><a href="#08042021" class=header-anchor >08/04/2021</a></h3>
<ol start=97 >
<li><p>Spawning a <code>run&#40;...&#41;</code> can take 2x more allocations from one system to another&#33;</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; using primecount_jll

julia&gt; @time run&#40;&#96;&#36;&#40;primecount&#40;&#41;&#41; 1e14&#96;&#41;; # can be 2x allocations in other systems&#33;
3204941750802
  0.150116 seconds &#40;468 allocations: 33.891 KiB&#41;</code></pre>
<ol start=92 >
<li><p>Woke up to the <code>primecount_jll</code> post getting tons of love, awesome&#33; Hat tip to Stefan Karpsinski and Carsten Bauer for alley-ooping this.</p>

<li><p>Need to remember the <code>@doc</code> macro exists to document code not necessarily next to a function declaration - need to add a dispatch to DoctorDocstrings.jl for this case.</p>

<li><p>Ah right, forgot the <code>make -j&#36;&#123;proc&#125;</code> flag for a parallel BBuilder recipe, thanks to Mos√® for <a href="https://github.com/JuliaPackaging/Yggdrasil/pull/2779/files">catching that again</a></p>

<li><p>Mos√® points out <a href="https://dev.azure.com/JuliaPackaging/Yggdrasil/_build/results?buildId&#61;9980&amp;view&#61;results">that it&#39;s not too hard to look at the warning logs</a> emmitted from the PR - that&#39;s</p>

</ol>
<p>how he was ble to spot that <code>CompilerSupportLibraries</code> was missing, and some other warnings needed to be addressed.</p>
<ol start=96 >
<li><p>How to easily create a function that updates its own internal state? Use a closure&#33; <a href="https://discourse.julialang.org/t/in-julia-how-to-create-a-function-that-saves-its-own-internal-state/58457/4?u&#61;miguelraz"> Like this</a></p>

</ol>
<pre><code class=language-julia-repl >julia&gt; f&#40;state&#61;0&#41; &#61; &#40;&#41;-&gt;state&#43;&#61;1
f &#40;generic function with 2 methods&#41;

julia&gt; foo &#61; f&#40;&#41;
#7 &#40;generic function with 1 method&#41;

julia&gt; foo&#40;&#41;
1

julia&gt; foo&#40;&#41;
2

julia&gt; foo&#40;&#41;
3

julia&gt; foo.state
Core.Box&#40;3&#41;

julia&gt; foo.state.contents
3</code></pre>
<h3 id=05042021__2 ><a href="#05042021__2" class=header-anchor >05/04/2021</a></h3>
<ol start=86 >
<li><p>Chris Elrod with the amazing hint that <code>@code_native</code> has a <code>syntax&#61;:intel</code> or <code>syntax&#61;:att</code> flag&#33;</p>

<li><p>Nice idea during the vacation: need to get</p>

</ol>
<ul>
<li><p>list of all the conditions passed to the integrator and find a way to shove them into the type system.</p>

<li><p>just ignore the commented rules, they don&#39;t pass those cases anyways :/</p>

<li><p>find the first comment symbol &quot;/;&quot;, &#40;Only 8 are excluded&#41;, and slurp with regex the lhs :&#61; rhs /; assumptions</p>

<li><p>make sure to separate the assumptions so that the weird list syntax doesn&#39;t creep in.</p>

</ul>
<ol start=88 >
<li><p><a href="https://github.com/akavel/up">up</a> Ultimate Plumber is absolutely amazing at ripgreppin&#39; files and seeing results in real time. Someone rewrite it in Rust already&#33;</p>

<li><p>Hmmm - what about just simply checking if there is a <code>With&#91;...&#93;</code>, and doing straight string replacement?</p>

<li><p>Don&#39;t forget about using <code>Traceur.jl</code>&#33;, just drop a <code>@trace foo&#40;3&#41;</code> and keep going.</p>

</ol>
<p>My workflow goes like this:</p>
<ul>
<li><p><code>cat</code> a file into up: <code>cat file.txt | up</code></p>

<li><p>setup pipes for grepping and counting <code>rg &quot;foo&quot; | rg --invert-match &quot;bar&quot; | wc</code></p>

</ul>
<ol start=91 >
<li><p>I made a <a href="https://discourse.julialang.org/t/number-of-primes-below-a-given-number/58709/21?u&#61;miguelraz">cool tutorial</a> on making a BinaryBuilder.jl recipe for <code>primecount</code> a bleeding edge</p>

</ol>
<p>algorithm library for counting primes in in C/C&#43;&#43;.</p>
<h3 id=31032021 ><a href="#31032021" class=header-anchor >31/03/2021</a></h3>
<ol start=85 >
<li><p>Made public advances on Rubin.jl today. Turns out you can call &#40;Within Mathematica&#41;</p>

</ol>
<p><code>FullForm&#91;Hold&#91;...&#93;&#93;</code> and that will give you the S-expression for the whole thing.</p>
<p>Now to parse that into Julia full fledged.</p>
<h3 id=26032021 ><a href="#26032021" class=header-anchor >26/03/2021</a></h3>
<ol start=81 >
<li><p>Apply a <code>SymbolicUtils.Rewriters.If&#40;cond, rw&#41;</code> to get the &quot;facts&quot; of our intrules.</p>

<li><p>Somebody can export every single DiffEq method to Fortran with some cleverness and <code>FortranTarget&#40;&#41;</code> shenanigans in Symbolics.jl hmmmmm</p>

<li><p><code>@less @which @edit @functionloc</code> all work the same&#33;</p>

<li><p>Finally got to forwarding a GitHub fork to a new changes&#33; Here&#39;s how:</p>

</ol>
<pre><code class=language-julia >git fetch upstream
git checkout master
git rebase upstream/master
git push -f origin master</code></pre>
<p>Kindly <a href="https://gist.github.com/ravibhure/a7e0918ff4937c9ea1c456698dcd58aa">taken from here</a>.</p>
<h3 id=25032021 ><a href="#25032021" class=header-anchor >25/03/2021</a></h3>
<ol start=78 >
<li><p>Instead of <code>Base.OneTo&#40;n&#41;</code>, use <code>axes&#40;A, i&#41;</code> &#40;Thanks Mason&#33;&#41;, like so:</p>

</ol>
<pre><code class=language-julia >julia&gt; A &#61; &#91;rand&#40;&#41; for i in 1:1000, j in 1:1000&#93;;julia&gt; function do_add4&#33;&#40;A&#41;
           n &#61; sizeof&#40;A&#41;&#91;1&#93;
           for j &#61; Base.OneTo&#40;n&#41;
               for i &#61; Base.OneTo&#40;n&#41;
                   @inbounds A&#91;i,j&#93; &#43;&#61; 1.0
               end
           end
       end</code></pre>
<p>Chris Elrod mentions that unless the <code>Base.OneTo</code> isn&#39;t being fed to an inlined function, it doesn&#39;t work for much.</p>
<ol start=79 >
<li><p>Mason also recommends <code>oneunit</code> instead of <code>one</code> as it works with arbitrary number types. BORKED though, disregard.</p>

<li><p>This also works:</p>

</ol>
<pre><code class=language-julia >julia&gt; using LoopVectorization
julia&gt; A &#61; # 1000 x 1000 rand float32s
julia&gt; @avxt A .* 1f0 # multithreaded and AVX512 on platforms that support it</code></pre>
<ol start=81 >
<li><p>I should start contributing more to LoopVectorization.jl...</p>

</ol>
<h3 id=23032021 ><a href="#23032021" class=header-anchor >23/03/2021</a></h3>
<ol start=73 >
<li><p>Derp - remember, it&#39;s <code>match&#40;regex, string&#41;.captures&#91;index&#93;</code></p>

</ol>
<p>74. <code>FileTrees</code> needed a <code>path&#40;file&#41; |&gt; string</code> instead of a <code>File</code>.</p>
<ol start=75 >
<li><p>This whole thing parses and writes to a JSON3 array within 10 seconds. That rules&#33;</p>

<li><p>To write files into the <code>MyPkg.jl</code> directory when activated Sukera suggests</p>

</ol>
<pre><code class=language-julia >joinpath&#40;@__DIR__, &quot;my_new_file.json&quot;&#41;</code></pre>
<ol start=77 >
<li><p>HELL YES RUBIN.JL LIVESSSS</p>

</ol>
<h3 id=22032021 ><a href="#22032021" class=header-anchor >22/03/2021</a></h3>
<ol start=70 >
<li><p><code>ArtifactUtils.jl</code> rules&#33; just <code>add_artifact&#33;</code> and you&#39;re almost good to go.</p>

<li><p>Need to work with a gajillion files in a folder and map the same transform to them lazily? Use FileTrees.jl for all your multithreaded directed needs&#33;</p>

<li><p>Hmmm some of the Rubi rules are ... commented? Hope I don&#39;t end up writing a full Mathematica to Julia transpiler...</p>

</ol>
<h3 id=1732021 ><a href="#1732021" class=header-anchor >17/3/2021</a></h3>
<p>So yeah, it&#39;s been a while. Back on the saddle again.</p>
<ol start=68 >
<li><p><code>Meta.show_sexpr</code> is super cool.</p>

<li><p>This works&#33;</p>

</ol>
<pre><code class=language-julia >for c in IOBuffer&#40;mymultilinestring&#41;
	foo&#40;c&#41;
end</code></pre>
<ol start=70 >
<li><p>Project Euler is coming along nicely. I should start on Rubi and put those freaking AdventOfCodeParsing skills to the test...</p>

</ol>
<h3 id=16122020 ><a href="#16122020" class=header-anchor >16/12/2020</a></h3>
<ol start=66 >
<li><p>Alex Arslan coming in again with the hot tips: If you want to parse a string into an expression &#40;I need it to call the last REPL history line with <code>@edit</code>&#41;</p>

</ol>
<p>you can use <code>Meta.parse&#40;&quot;3^2&quot;&#41; &#61;&#61; :&#40;3 ^ 2&#41;</code>.</p>
<ol start=67 >
<li><p>Whooops. Shipped <code>DoctorDocstrings.jl</code> today. Best way to figure out if you have a bug is to ship it to production. Problem is that the <code>jldoctest</code> expects the output to be <code>display</code>ed just after</p>

</ol>
<p>the REPL input, so I need to paste the code there. I think I can handle it... <code>display</code> is the function to print to the REPL, btw.</p>
<h3 id=15122020 ><a href="#15122020" class=header-anchor >15/12/2020</a></h3>
<ol start=65 >
<li><p>Boy oh Boy. I started on DoctorDocstrings.jl. It&#39;s gonna be amazing.</p>

</ol>
<h3 id=14122020 ><a href="#14122020" class=header-anchor >14/12/2020</a></h3>
<ol start=62 >
<li><p>Retaking Matt Bauman&#39;s <a href="https://github.com/mbauman/ParallelWorkshop2019/blob/master/040&#37;20Multithreading.jl">Parallel workshop from JuliaCon 2019</a></p>

</ol>
<ul>
<li><p>Remember to accumulate into <code>Threads.Atomic&#123;eltype&#40;arr&#41;&#125;&#40;zero&#40;eltype&#40;arr&#41;&#41;</code> if updates are scarce.</p>

<li><p><code>Threads.atomic_add&#33;</code> and friends aka <code>atomic_add&#33;&#40;r, A&#91;i&#93;&#41; &#61;&#61; r &#43;&#61; A&#91;i&#93;</code></p>

<li><p><code>using .Threads</code></p>

<li><p>Pattern: Initialize an accumulator, write an inner loop &#40;independent for each loop&#41;, reduce the results at the end with another for loop</p>

<li><p>BUT&#33; Atomics can&#39;t yet handle complex numbers, or structs.</p>

<li><p>Pattern: Make an array the size of the threads, <code>@threads for i in eachindex&#40;A&#41;; R&#91;threadid&#40;&#41;&#93; &#43;&#61; A&#91;i&#93;</code></p>

</ul>
<p>There&#39;s 3 interesting distinctions for <code>@sync</code> and <code>@async</code>:</p>
<pre><code class=language-julia >@time for i in 1:10 # takes about 10s
    sleep&#40;1&#41;
end
@time for i in 1:10 # about 0s
    @async sleep&#40;1&#41;
end
@time @sync for i in 1:10 # about 1s
    @async sleep&#40;1&#41;
end</code></pre>
<p>You can <code>wait</code> for a task to block until it finishes or <code>fetch</code> to initizlize it now.</p>
<ul>
<li><p><code>using Distributed</code>: You have 8 REPLs started on each computer. You gain finer control on which processor communicates with which.</p>

<li><p><code>nprocs&#40;&#41;, myid&#40;&#41;, @everywhere</code>,</p>

<li><p>useful idiom: <code>for i in workers&#40;&#41;; @spawnat i work&#40;...&#41;; end</code></p>

<li><p>instead of manually partitioning the space and juggling indexes, try using</p>

</ul>
<pre><code class=language-julia >@distributed &#40;&#43;&#41; for r in &#91;&#40;0:9999&#41; .&#43; offset for offset in 0:10_000:r&#91;end&#93;-1&#93;
    partial_pi&#40;r&#41;
end</code></pre>
<ul>
<li><p><code>@distributed</code> has special support for reductions - to save data movement. Good for reductions.</p>

<li><p><code>@pmap</code> over a reduction like <code>0:999</code> and <code>0:10000:r&#91;end&#93;-1</code> and then change it to <code>0:9999</code> and <code>0:1000000:r&#91;end&#93;-1</code> because you reduce the communication. Especially good for expensive inner loops that return a value. Creates a task per item in iter space.</p>

<li><p><code>SharedArray</code> will let all threads concurrently access same array&#33; <code>using SharedArrays</code> should Just Work TM. Slower than threads, since you go to disk.</p>

<li><p>Heads up - <code>SharedArrays</code> must be bits types - because they need to be Mmapped. Threading like behavior replacement on a single machine.</p>

<li><p>You can initialize an <code>SharedArray</code> with an <code>init</code> function so that it starts up its own data in a sense.</p>

<li><p><code>@sync @distributed</code> needs to happen to wait for the correct results.</p>

<li><p><code>DistributedArray</code> Every worker has access to a different portion of the array. Let&#39;s the data do the work splitting.</p>

<li><p><code>fetch&#40;@spawnat 2 A.localpart&#41;</code> shows the data the DArray <code>A</code> has on worker 2.</p>

<li><p>Pluses: Generic arrays, data itself splits the computation.</p>

</ul>
<ol start=63 >
<li><p>Got pretty well punked by a <a href="https://twitter.com/DahlitzF/status/1338384990040682498">Python gotcha</a></p>

</ol>
<pre><code class=language-julia-repl >julia&gt; IdDict&#40;true &#61;&gt; &quot;yes&quot;, 1 &#61;&gt; &quot;no&quot;, 1.0 &#61;&gt; &quot;maybe&quot;&#41;
IdDict&#123;Any,String&#125; with 3 entries:
  true &#61;&gt; &quot;yes&quot;
  1.0  &#61;&gt; &quot;maybe&quot;
  1    &#61;&gt; &quot;no&quot;</code></pre>
<p>Vs</p>
<pre><code class=language-julia-repl >julia&gt; Dict&#40;true &#61;&gt; &quot;yes&quot;, 1 &#61;&gt; &quot;no&quot;, 1.0 &#61;&gt; &quot;maybe&quot;&#41;
Dict&#123;Real, String&#125; with 1 entry:
  1.0 &#61;&gt; &quot;maybe&quot;</code></pre>
<p>Fortunately, Stefan was able to convince some of use in  the Julia Slack that this is a desirable behavior - you should replace the keys of a dict when you do this, otherwise you will be very very unhappy. Here&#39;s the relevant <a href="https://github.com/JuliaLang/julia/blob/0bedcdabeb21d0d244babb4a88c91ff75a15577f/base/float.jl#L534-L553">implementations</a> in the <code>decompose</code> function in Base.</p>
<p>Quoting Stefan from the Slack:</p>
<pre><code class=language-julia >in 0.3 we didn‚Äôt hash equal keys the same, we considered the type, but it was really bad
worst problem was that the type of a dict changed the behavior
if you had a Dict&#123;Any,String&#125; and you used 1 and 1.0 as keys, they would end up in different slots; if you had a Dict&#123;Float64,String&#125; and you used 1 and 1.0 as keys, they would both end up in the 1.0 slot
the only ways to avoid that  badness were:
1. don‚Äôt auto-convert keys, which would be really annoying and fussy
2. figure out a good way to value-based key hashing efficiently
two major challenges:
1. make it fast for common types like ints and floats and reasonably fast for things like bigints and rationals
2. make it extensible so that people implementing their own numeric types can do so correctly
yes, package authors definitely extend &#39;Base.decompose&#39; to have proper hashing.</code></pre>
<p>NICE - <a href="https://github.com/JuliaLang/julia/pull/38881">turned the confusion into a PR</a></p>
<ol start=64 >
<li><p>Very nice solution to the wordcount exercise: with a <code>matchall</code> regex and a <code>foreach</code>.</p>

</ol>
<pre><code class=language-julia >function wordcount&#40;sentence::AbstractString&#41;
    words &#61; matchall&#40;r&quot;&#91;a-z&#93;&#43;&#39;&#91;a-z&#93;&#43;|&#91;a-z0-9&#93;&#43;&quot;, lowercase&#40;sentence&#41;&#41;
    counts &#61; Dict&#123;AbstractString, Int&#125;&#40;&#41;
    foreach&#40;w -&gt; counts&#91;w&#93; &#61; get&#40;counts, w, 0&#41; &#43; 1, words&#41;
    counts
end</code></pre>
<h3 id=11122020 ><a href="#11122020" class=header-anchor >11/12/2020</a></h3>
<ol start=60 >
<li><p>Exercism: Circular Buffer. A few informal interfaces define the ability of Julia to give you a lot of methods for free&#33;</p>

</ol>
<ul>
<li><p><code>append&#33;, empty&#33;, pop&#33;, pushfirst, setindex&#33;, collect, eltype, first, getindex, isempty, iterate, last, length, size</code> are all &quot;free&quot; if you can properly subtype <code>&lt;: AbstractVector</code>.</p>

<li><p>I didn&#39;t need to keep a bunch of tracking vectors - sometimes just 2 Ints to signal where the <code>Head</code> &#40;first writeable element&#41; and <code>tail</code> first removable element are is enough additional info.</p>

<li>
</ul>
<ol start=61 >
<li><p>Omicron666 from Discord helps out with the syntax for nested for loops/iterations:</p>

</ol>
<ul>
<li><p><code>&#91;10*i &#43; j for i&#43;1:M for j in i&#43;1:N&#93; # Do the first variable i, then the second without a comma</code></p>

</ul>
<h3 id=7122020 ><a href="#7122020" class=header-anchor >7/12/2020</a></h3>
<ol start=52 >
<li><p><code>parse&#40;Int, &quot;01010101&quot;, base&#61;2&#41;</code> to get a binary number directly is really nifty.</p>

<li><p>Remember to use the <code>lo, hi &#61; extrema&#40;xs&#41;</code> function&#33; Credit for a really elegant solution to JLLing.</p>

<li><p>Some really good learning about writing Iterators from <a href="https://julialang.org/blog/2018/07/iterators-in-julia-0.7/">Eric Davies from Invenia</a></p>

</ol>
<ul>
<li><p><code>IterTools.jl</code> is your friend.</p>

<li><p>You need 2 <code>iterate</code> methods. YOu can be clever and use a kwarg, or if you aren&#39;t sure of the structure of the <code>state</code> arg, use <code>...</code>:</p>

</ul>
<pre><code class=language-julia >function iterate&#40;it::TakeNth, state...&#41;
    xs_iter &#61; nothing

    for i &#61; 1:it.interval
        xs_iter &#61; @ifsomething iterate&#40;it.xs, state...&#41;
        state &#61; Base.tail&#40;xs_iter&#41;
    end

    return xs_iter
end</code></pre>
<ol start=55 >
<li><p>To dump a TLA  file into a dot file, use <code>tlc -dump dot file.dot file.tla</code>. Then read it with</p>

</ol>
<ul>
<li><p>Hmmmmm Strong connected concurrent components in LightGraphs.jl ? <a href="https://github.com/tlaplus/tlaplus/blob/master/general/docs/contributions.md">link here</a>, <a href="https://github.com/vbloemen/hong-ufscc">repo here</a></p>

</ul>
<ol start=56 >
<li><p><a href="https://github.com/kimikage/CodeCosts.jlA">CodeCosts.jl</a> looks REALLLLLY cool for a &#91;JuliaTooling&#93; video soon...</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; using CodeCosts

julia&gt; f&#40;x::T&#41; where T &#61; convert&#40;T, max&#40;x * 10.0, x / 3&#41;&#41;
f &#40;generic function with 1 method&#41;

julia&gt; @code_costs f&#40;1.0f0&#41;
CodeCostsInfo&#40;
     CodeInfo&#40;
   1 1 ‚îÄ &#37;1  &#61; Base.fpext&#40;Base.Float64, x&#41;::Float64
   4 ‚îÇ   &#37;2  &#61; Base.mul_float&#40;&#37;1, 10.0&#41;::Float64
  20 ‚îÇ   &#37;3  &#61; Base.div_float&#40;x, 3.0f0&#41;::Float32
   1 ‚îÇ   &#37;4  &#61; Base.fpext&#40;Base.Float64, &#37;3&#41;::Float64
   2 ‚îÇ   &#37;5  &#61; Base.lt_float&#40;&#37;2, &#37;4&#41;::Bool
   1 ‚îÇ   &#37;6  &#61; Base.bitcast&#40;Base.Int64, &#37;4&#41;::Int64
   1 ‚îÇ   &#37;7  &#61; Base.slt_int&#40;&#37;6, 0&#41;::Bool
   1 ‚îÇ   &#37;8  &#61; Base.bitcast&#40;Base.Int64, &#37;2&#41;::Int64
   1 ‚îÇ   &#37;9  &#61; Base.slt_int&#40;&#37;8, 0&#41;::Bool
   0 ‚îÇ   &#37;10 &#61; Base.not_int&#40;&#37;7&#41;::Bool
   1 ‚îÇ   &#37;11 &#61; Base.and_int&#40;&#37;9, &#37;10&#41;::Bool
   1 ‚îÇ   &#37;12 &#61; Base.or_int&#40;&#37;5, &#37;11&#41;::Bool
   2 ‚îÇ   &#37;13 &#61; Base.ne_float&#40;&#37;2, &#37;2&#41;::Bool
   1 ‚îÇ   &#37;14 &#61; Base.Math.ifelse&#40;&#37;13, &#37;2, &#37;4&#41;::Float64
   2 ‚îÇ   &#37;15 &#61; Base.ne_float&#40;&#37;4, &#37;4&#41;::Bool
   1 ‚îÇ   &#37;16 &#61; Base.Math.ifelse&#40;&#37;15, &#37;4, &#37;2&#41;::Float64
   1 ‚îÇ   &#37;17 &#61; Base.Math.ifelse&#40;&#37;12, &#37;14, &#37;16&#41;::Float64
   1 ‚îÇ   &#37;18 &#61; Base.fptrunc&#40;Base.Float32, &#37;17&#41;::Float32
   0 ‚îî‚îÄ‚îÄ       return &#37;18
     &#41;
, CodeCostsSummary&#40;
     zero:  2|
    cheap: 12| 111111111111
   middle: 10| 4&#61;&#61;&#61;2&#61;2&#61;2&#61;
expensive: 20| 20&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;
    total: 42| 100 &#40;default threshold&#41;
&#41;&#41;</code></pre>
<ol start=57 >
<li><p><a href="https://www.youtube.com/watch?v&#61;YBSt1jYwVfU">DP by errichto:</a></p>

</ol>
<ul>
<li><p>There&#39;s identical subproblems &#40;think of the leaves of fibonacci&#40;5&#41;&#41;</p>

<li><p>if it doesn&#39;t matter how you get to an intermediate state, then the dims of the dynamic program are <code>dp&#91;N&#93;</code>, with N states.</p>

<li><p>Then think of the transition.</p>

<li><p>When doing the minimum path sum through an array, take care to a&#41; initialize the edges / boundaries, the first element</p>

<li><p>build a copy of the initial data, and only update after doing the logic for the max/min logic.</p>

<li><p>Brain hurts.</p>

</ul>
<ol start=58 >
<li><p><a href="https://www.youtube.com/watch?v&#61;1mtvm2ubHCY">Dynamic prog 2 by errichto</a>:</p>

</ol>
<ul>
<li><p>Combination sum problem.</p>

</ul>
<ol start=59 >
<li><p>TLA challenge for AoC2020&#33;</p>

</ol>
<h3 id=6122020 ><a href="#6122020" class=header-anchor >6/12/2020</a></h3>
<ol start=51 >
<li><p>Advent of Code 7 kicked my butt. HOWEVER&#33; We rocked the parsing with some cool regexes.</p>

</ol>
<ul>
<li><p>I couldn&#39;t solve the first one because I am not familiar with the concept of queues. Or stacks.</p>

</ul>
<p>Again, Pablo Zubieta coming in with the fire code:</p>
<pre><code class=language-julia >function fish&#40;d&#41;
    # if you only pop and append to the end of vectors, all is good
    queue &#61; &#91;k for &#40;k, v&#41; in d if haskey&#40;v, &quot;shiny gold&quot;&#41;&#93;
    found &#61; Set&#40;queue&#41;
    while &#33;isempty&#40;queue&#41;
        bag &#61; pop&#33;&#40;queue&#41;
        new &#61; &#40;k for &#40;k, v&#41; in d if haskey&#40;v, bag&#41;&#41;
        union&#33;&#40;found, new&#41; # This is better than a push&#33;
        append&#33;&#40;queue, new&#41;
    end
    return length&#40;found&#41;
end</code></pre>
<ul>
<li><p>So, the idea is I have <code>pop&#33;</code>, <code>push&#33;</code> and a <code>queue</code>.</p>

<li><p>If you have a vector of <code>Pair</code>, you can sum them with <code>sum&#40;last, pairs&#41;</code>.</p>

<li><p>For performant regexes <a href="https://www.loggly.com/blog/five-invaluable-techniques-to-improve-regex-performance/">Specificity is king</a></p>

<li><p>Teo ShaoWei is using some very concise regexes and a very handy function to return named tuples:</p>

</ul>
<pre><code class=language-julia ># &quot;nop &#43;0&quot;
# &quot;acc &#43;3&quot;
# &quot;jmp -99&quot; expected inputs
function parse_input_line&#40;line&#41;
    m &#61; match&#40;r&quot;^&#40;\w&#123;3&#125;&#41; &#40;&#91;-&#43;&#93;\d&#43;&#41;&#36;&quot;, line
    return &#40;op &#61; m&#91;1&#93;, val &#61; parse&#40;Int, m&#91;2&#93;&#41;&#41;
end</code></pre>
<p>From this we consider the following:</p>
<ol>
<li><p>Consider having a function that parses a line at a time and passes a named tuple to the solver.</p>

<li><p>Don&#39;t be silly - if you already have code that finds the solution to something in part1... use it in part2. -_-.</p>

</ol>
<h3 id=5122020 ><a href="#5122020" class=header-anchor >5/12/2020</a></h3>
<ol start=47 >
<li><p>Advent of Code just keeps on rocking&#33;</p>

<li><p>Exericisms review: checking if something is an isogram &#40;no repeated letters&#41;:</p>

</ol>
<pre><code class=language-julia >isisogram&#40;s&#41; &#61; allunique&#40;i for i in lowercase&#40;s&#41; if isletter&#40;i&#41;&#41;</code></pre>
<ol start=49 >
<li><p>When defining your new types, make sure to use <code>promote_rule</code> appropriately. <code>Exercism:Complex Numbers:</code></p>

</ol>
<ul>
<li><p><code>promote_rule&#40;T1, T2&#41; &#61; foo&#40;promote_type&#40;T1,T2&#41;&#41;</code></p>

<li><p>Remember to import <code>Base.abs, Base.exponent, Base.:&#43; ...</code></p>

<li><p>For funsies, try commenting out your <code>zero&#40;x&#41;, one&#40;x&#41;</code> implementations and seeing if yoru algebra still works. &#40;Should work regardless&#33;&#41;</p>

<li><p>You can write <code>import Base: real, imag, conj, &#43;, -, * ...</code> at the top of the file and then do <code>&#43;&#40;x::Complex, y::Complex&#41;</code> without <code>Base.:</code>.</p>

<li><p>Fooling around with rationals is no fun if you don&#39;t know the <code>copysign&#40;x, y&#41;</code> function: takes the magnitude of <code>x</code> with the sign of <code>y</code>. Removes</p>

</ul>
<p>a lot of hacky logic.</p>
<ul>
<li><p>Note: <code>&#61;&gt; is for pairs, &gt;&#61; is boolean</code> o.0</p>

<li><p>NOTE: Make sure that the tests are RIGHT. Not checking for a 0 denominator blew up in my face.</p>

<li><p>If you want to print a custom type, overload <code>show</code> so that it <code>print</code>s what you want</p>

</ul>
<pre><code class=language-julia >To customize human-readable text output for objects of type T, define
  show&#40;io::IO, ::MIME&quot;text/plain&quot;, ::T&#41; instead. Checking the :compact IOContext
  property of io in such methods is recommended, since some containers show their
  elements by calling this method with :compact &#61;&gt; true.</code></pre>
<ul>
<li><p><code>show&#40;io::IO, x::RationalNumber&#41; &#61; print&#40;io, num&#40;x&#41;,&quot;//&quot;,den&#40;x&#41;&#41;</code></p>

</ul>
<p>Now onto CustomSet:</p>
<ul>
<li><p>You can <code>merge&#40;dict1, dict1&#41;</code>.</p>

<li><p>You can get the <code>keytype&#40;d&#41;</code></p>

<li><p>Great tip from Sascha Mann: To define <code>foo/foo&#33;</code> combos, do <code>foo&#33;&#40;x&#41; &#61; ...</code> and then <code>foo&#40;x&#41; &#61; foo&#33;&#40;copy&#40;x&#41;&#41;</code></p>

<li><p>When test sets fail eagerly, consider moving them &quot;up&quot; so that another property is tested first.</p>

<li><p>Iteration is ~~hard~~ easier now than before, just figure out how to write the proper</p>

</ul>
<pre><code class=language-julia >iterate&#40;s::CustomSet&#41; &#61; iterate&#40;s.dict&#41;
iterate&#40;s::CustomSet, el&#41; &#61; iterate&#40;s.dict, el&#41;</code></pre>
<ol start=50 >
<li><p>Iterators galore&#33; We had massive help from Sascha and Fliksel:</p>

</ol>
<ul>
<li><p>LESSON: RETURN WHAT YOU WANT THE NEXT STATE TO BE</p>

</ul>
<pre><code class=language-julia-repl >julia&gt; function Base.iterate&#40;iter::Fibo, state &#61; &#40;0, &#40;1,1&#41;&#41;&#41; # The 0 here will represent the &quot;counter&quot;
       if state&#91;1&#93; &gt; iter.n
           return nothing
       end
       f1, f2 &#61; state&#91;2&#93;
       return f1&#43;f2, &#40;state&#91;1&#93;&#43;1, &#40;f1&#43;f2, f1&#41;&#41;
       end</code></pre>
<ol start=51 >
<li><p>Note about iterators:</p>

</ol>
<pre><code class=language-julia >function Base.iterate&#40;iter::Fibo, state &#61; ...&#41;
				        #  ^
					#  |
	counter &#61; state&#91;1&#93; # &lt;- this has to match with newstate
	if counter &gt; iter.n
	    return nothing
	end

	# Clever calculations here
	newitem &#61; foo&#40;...&#41;
	newstate &#61; &#40;bar&#40;...&#41;, ...&#41;
	# NOTE: the tuples must match up&#33;
	# typeof&#40;newstate&#41; &#61;&#61; typeof&#40;state&#41;
	return newitem, newstate

end</code></pre>
<h3 id=4122020 ><a href="#4122020" class=header-anchor >4/12/2020</a></h3>
<ol start=42 >
<li><p>Pablo Zubieta just absolutely shreked his Advent of Code Day04 problem: here&#39;s the learnings.</p>

</ol>
<ul>
<li><p>Parsing to integers and then applying logic can be done within a regex itself.</p>

<li><p>Just check for the actual cases that need to be satisfied with the characters themselves, no need to lift them into ints.</p>

<li><p>A good strategy is to separate your cases with <code>|</code> and put a word boundary at the end <code>\b</code>.</p>

<li><p>It&#39;s zero allocations&#33;</p>

</ul>
<pre><code class=language-julia >const input &#61; split&#40;String&#40;read&#40;&quot;input&quot;&#41;&#41;, r&quot;\n\n&quot;&#41;

const fields1 &#61; &#40;r&quot;byr&quot;, r&quot;iyr&quot;, r&quot;eyr&quot;, r&quot;hgt&quot;, r&quot;hcl&quot;, r&quot;ecl&quot;, r&quot;pid&quot;&#41;
const fields2 &#61; &#40;
    r&quot;byr:&#40;19&#91;2-9&#93;&#91;0-9&#93;|200&#91;0-2&#93;&#41;\b&quot;,
    r&quot;iyr:20&#40;1&#91;0-9&#93;|20&#41;\b&quot;,
    r&quot;eyr:20&#40;2&#91;0-9&#93;|30&#41;\b&quot;,
    r&quot;hgt:&#40;1&#40;&#91;5-8&#93;&#91;0-9&#93;|9&#91;0-3&#93;&#41;cm|&#40;59|6&#91;0-9&#93;|7&#91;0-6&#93;&#41;in&#41;\b&quot;,
    r&quot;hcl:#&#91;0-9a-f&#93;&#123;6&#125;\b&quot;,
    r&quot;ecl:&#40;amb|blu|brn|gry|grn|hzl|oth&#41;\b&quot;,
    r&quot;pid:\d&#123;9&#125;\b&quot;
&#41;

# Part 1
count&#40;p -&gt; all&#40;t -&gt; contains&#40;p, t&#41;, fields1&#41;, input&#41;

# Part 2
count&#40;p -&gt; all&#40;t -&gt; contains&#40;p, t&#41;, fields2&#41;, input&#41;</code></pre>
<ol start=43 >
<li><p>Instead of</p>

</ol>
<pre><code class=language-julia >if &#33;haskey&#40;d, str&#41;
    d&#91;str&#93; &#61; 1
elseif
    haskey&#40;d, str&#41;
    d&#91;str&#93; &#43;&#61; 1
else
    ...
end</code></pre>
<p>You can try</p>
<pre><code class=language-julia >d&#91;str&#93; &#61; get&#40;d, s, 0&#41; &#43; 1</code></pre>
<ol start=44 >
<li><p>Revisiting Exercisms is a good way to hone skills. Instead of</p>

</ol>
<pre><code class=language-julia >a, b, c &#61; dict&#91;c&#91;1&#93;&#93;, dict&#91;c&#91;2&#93;&#93; dict&#91;c&#91;3&#93;&#93;
# vs
a, b, c &#61; &#40;dict&#91;c&#91;i&#93;&#93; for i in 1:3&#41;</code></pre>
<ol start=45 >
<li><p>Remember to check for type instabilities in the code with <code>@code_warntype</code>.</p>

<li><p>Stacking generators within generators is tricky, but <code>joshua-whittemore</code> has a trick &#40;Exercism-ETL&#41;</p>

</ol>
<pre><code class=language-julia >function transform&#40;input::Dict&#41;
    Dict&#40;
         lowercase&#40;letter&#41; &#61;&gt; value
         for &#40;value, letters&#41; in input
         for letter in letters
    &#41;
end</code></pre>
<h3 id=2122020 ><a href="#2122020" class=header-anchor >2/12/2020</a></h3>
<ol start=37 >
<li><p>Beast of a solution with great help from Colin:</p>

</ol>
<pre><code class=language-julia >function solutions&#40;str&#41;
    sol1, sol2 &#61; 0, 0
    for line in readlines&#40;str&#41;
        lo, hi, &#40;char,&#41;, pass &#61; match&#40;r&quot;^&#40;\d&#43;&#41;-&#40;\d&#43;&#41; &#40;\w&#41;: &#40;.&#43;&#41;&#36;&quot;, line&#41;.captures
        lo, hi &#61; parse.&#40;Int, &#40;lo, hi&#41;&#41;
        sol1 &#43;&#61; lo &lt;&#61; count&#40;&#61;&#61;&#40;char&#41;, pass&#41; &lt;&#61; hi
        sol2 &#43;&#61; &#40;pass&#91;lo&#93; &#61;&#61; char&#41; ‚äª &#40;pass&#91;hi&#93; &#61;&#61; char&#41;
    end
    sol1, sol2
end</code></pre>
<p>The <code>match&#40;r&quot;...&quot;, line&#41;.captures</code> immediately splits and gets the appropriate strings, and <code>&#40;char,&#41;</code> is a tuple decomposition of a container with a single element, &#40;similar to <code>&#40;a,b&#41; &#61; &#91;3 4&#93;</code>&#41;.</p>
<ol start=38 >
<li><p>Regex has many smart functions</p>

</ol>
<pre><code class=language-julia >Regex&#40;&quot;&#91;regex&#93;&quot;&#41;
r&quot;&#91;regex&#93;&quot;
match&#40;needle, haystack&#41;
~~matchall&#40;needle, haystack&#41;~~
eachmatch&#40;needle, haystack&#41;
ismatch&#40;needle, haystack&#41;</code></pre>
<ol start=39 >
<li><p>If I have <code>str &#61; &quot;Roll On The Floor&quot;</code> and I want to match on each first character to get the acronym, I can use <code>getproperty&#40;m, :match&#41;</code> for that:</p>

</ol>
<pre><code class=language-julia >r &#61; eachmatch&#40;r&quot;\b&#91;a-zA-Z&#93;&quot;, str&#41;
join&#40;getproperty&#40;r&#91;i&#93;, :match&#41; for i in 1:length&#40;r&#41;&#41;</code></pre>
<ol start=40 >
<li><p>Count is really nifty:</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; xs &#61; &quot;#..##.&quot;
&quot;#..##.&quot;

julia&gt; count&#40;&quot;#&quot;, xs&#41;
3</code></pre>
<p>These &quot;curried&quot; operators can be found with <code>rg Fix&#91;12&#93;</code>, or <code>help?&gt; Fix1</code></p>
<p>&#33;&#33;&#33; You can implement this for your own methods with <code>Base.Fix2&#123;typeof&#40;func&#41;&#125;</code>: <code>contains&#40;needle&#41; &#61; Base.Fix2&#40;contains, needle&#41;</code></p>
<ol start=41 >
<li><p>When dealing with parsing strings by hand, split can sometimes give useless empty strings that muck up the analysis later on. Use the <code>kw</code> <code>keepempty&#61;false</code> to get rid of those spurious results&#33; For an example, check the AdventOfCodeDay04 code.</p>

</ol>
<h3 id=1122020 ><a href="#1122020" class=header-anchor >1/12/2020</a></h3>
<ol start=35 >
<li><p>Advent of code day 01: cool tricks:</p>

<li><p>Advent of code day 02: Cool tricks:</p>

</ol>
<ul>
<li><p>remember that <code>&#39;a&#39; &#33;&#61; &quot;a&quot;</code>. If ASCII <code>&quot;a&quot;&#91;1&#93;</code> works, and in other cases, use <code>only&#40;&#41;</code>.</p>

<li><p>Even better, as <code>@tommyxr</code> points out, just do <code>&#61;&#61;&#40;letter&#41;</code>.</p>

</ul>
<h3 id=21112020 ><a href="#21112020" class=header-anchor >21/11/2020</a></h3>
<ol start=33 >
<li><p>Credit to <code>@Suker</code>: REPL interactivity can be drastically helped &#40;and enhanced with Revise.jl&#41; if you have the following:</p>

</ol>
<ul>
<li><p>working on a script that may have some big g Global parameter everywhere,</p>

<li><p>put those in a function <code>main&#40;&#41;</code> and put <code>&#33;isinteractive&#40;&#41; &amp;&amp; main&#40;&#41;</code> at the end of the file</p>

</ul>
<ol start=34 >
<li><p>Reading the SciML dev docs:</p>

</ol>
<ul>
<li><p>To add a new package to the common interface, define the types</p>

</ul>
<pre><code class=language-julia >abstract type AnalyticAlgorithm &lt;: DiffEqBase.AbstractAnalyticAlgorithm</code></pre>
<ul>
<li><p>specify type parameters for concrete algos</p>

</ul>
<pre><code class=language-julia >struct analytic&#123;Simple&#125; &lt;: AnalyticAlgorithm&#123;Simple&#125; end
analytic&#40;; simple &#61; true&#41; &#61; analytic&#123;simple&#125;&#40;&#41;</code></pre>
<ul>
<li><p>overload <code>__solve</code> from <code>DiffEqBase.jl</code></p>

</ul>
<h3 id=19112020 ><a href="#19112020" class=header-anchor >19/11/2020</a></h3>
<ol start=31 >
<li><p>Chris de Graaf suggested instead of using <code>const A &#61; &#91;1&#93;</code>, try using a <code>Ref</code>:</p>

</ol>
<pre><code class=language-julia ># access a ref with &#91;&#93;
A &#61; Ref&#40;0&#41;
A&#91;&#93; &#61; 1
A&#91;&#93; &#61;&#61; 1 # true</code></pre>
<p>Takes a bit more nanoseconds to access than a 1 sized array but is sized <code>&#40;&#41;</code>.</p>
<ol start=32 >
<li><p>Execution matters more than hoarding ideas. <a href="https://www.youtube.com/watch?v&#61;dSCBCk4xVa0">Decent Talk by John Cormack</a>. Enjoy the insight high, then get down in the mud and try to bust your own idea.</p>

</ol>
<h3 id=15112020 ><a href="#15112020" class=header-anchor >15/11/2020</a></h3>
<ol start=26 >
<li><p>Al final empec√© el manual en espa√±ol. Parece que <code>Laura Ventosa</code> va a ser buena mancuerna para este proyecto. Qu√© chido. La <a href="https://github.com/miguelraz/julia-es-manual">traduccion del manual esta en este link</a>.</p>

</ol>
<pre><code class=language-bash >wc src/index.mc src/manual/getting-started.md src/manual/variables.md
  109   986  7546 src/index.md
  100   731  5084 src/manual/getting-started.md
  138   932  6102 src/manual/variables.md
  347  2649 18732 total</code></pre>
<p>CONTEO: 2640</p>
<ol start=27 >
<li><p>Copy pasting to the system clipboard in Vim is easier with <code>select the text -&gt; &quot;&#43;y</code>. Also <code>t</code> will go to just before a character <code>F</code> will search a char backwards, and <code>&#125;</code> will go to the end of a paragraph.</p>

<li><p>It seems the <code>Savitzky-Golay</code> filter is very - VERY - interesting for a lot of computing people. Really need to get into parallelizing it and figuring out the GPU part.</p>

</ol>
<ul>
<li><p>&#91; &#93; Investigate why it was not 4x as fast with Float32s as with Float64s.</p>

<li><p>&#91; &#93; Check for other applications <a href="https://sites.middlebury.edu/dunham/files/2017/07/MC2-004-Signal-Processing-in-a-Physics-Experiment-2017-July-11-FINAL.pdf">in this cool presentaiton</a></p>

</ul>
<ol start=29 >
<li><p>Started on Pochoir.jl. Godspeed.</p>

<li><p>Oh god. SymbolicUtils.jl can revive IntegralTransforms.jl.</p>

</ol>
<h3 id=14112020 ><a href="#14112020" class=header-anchor >14/11/2020</a></h3>
<ol start=25 >
<li><p>Found an absolutely amazing post about learning Z3 as if it were <a href="https://www.craigstuntz.com/posts/2015-03-05-provable-optimization-with-microsoft-z3.html">Lisp syntactically</a>.</p>

</ol>
<p>Should definitely look into this further. I think some Z3 and TLA&#43; are more than enough formal methods for a while... There&#39;s even an online <a href="https://rise4fun.com/Z3/7VZh">editor that seems useful for prototyping</a></p>
<h3 id=13112020 ><a href="#13112020" class=header-anchor >13/11/2020</a></h3>
<ol start=18 >
<li><p>Counting neighbours / minesweeping? Ran into this problem on the <a href="https://exercism.io/my/solutions/fae14489bd9b4de1bc5283815f0e66ac">Exercsim</a> earlier today:</p>

</ol>
<pre><code class=language-julia >sum&#40;arr&#91;i&#93;&#91;j&#93; .&#61;&#61; &quot;*&quot;&#41; #where j &#61; 1:3</code></pre>
<p>is a no-no. First, we have to remember to compare <code>Char</code>s to <code>Char</code>s, since</p>
<pre><code class=language-julia >&quot;*&quot; &#61;&#61; &#39;*&#39; # false
&#39;*&#39; &#61;&#61; &#39;*&#39; # true</code></pre>
<p>A correct approach looks like:</p>
<pre><code class=language-julia >sum&#40;arr&#91;i&#93;&#91;j&#93; &#61;&#61; &#39;*&#39; for j in idxs&#41;</code></pre>
<p>by use of some spiffy generator syntax.</p>
<ol start=19 >
<li><p>Maybe time for someone to write a fast <code>neighbours&#40;arr, i, j&#41;</code> function in a package and PR it to LinAlg? Credit to Sascha Mann. Use views to make it fast.</p>

</ol>
<p>Kick it up a notch: make it N-Dimensional, and performant&#33;</p>
<ol start=20 >
<li><p>You can&#39;t do <code>a &#61; &quot;abc&quot;; a&#91;2&#93; &#61; &#39;3&#39;;</code>, or <code>&#39;3&#39; &#33;&#61; Char&#40;3&#41;</code>, because STRINGS ARE IMMUTABLE&#33;</p>

<li><p><a href="https://exercism.io/tracks/julia/exercises/minesweeper/solutions/2c776b090173426eb160cea17a85e536#solution-comment-170293"><code>Vyu</code></a> has an amazing solution for summing up neighbours in a Matrix:</p>

</ol>
<pre><code class=language-julia >function sumAdjacent&#40;array, xy::CartesianIndex&#123;2&#125;&#41;
    x, y &#61; xy.I
    lenX, lenY &#61; size&#40;array&#41;
    v &#61; view&#40;
        array,
        max&#40;1, x - 1&#41;:min&#40;lenX, x &#43; 1&#41;,
        max&#40;1 ,y - 1&#41;:min&#40;lenY, y &#43; 1&#41;
    &#41;
    sum&#40;v&#41;
end</code></pre>
<ol start=22 >
<li><p><a href="">bovine3dom</a> has a solution for a hypercube minefield:</p>

</ol>
<pre><code class=language-julia ># This function works for hypercube minefields too, which is pretty cool.
# If you decide to construct your own hypercube minefield, bear in mind that
# the curse of dimensionality means that mines become useless as the number of
# dimensions increases to even moderate numbers.
#
# &#40;A more useful metric for &#39;danger from mines&#39; is the percentage of neighbouring
# cells which contain mines&#41;.
function flag_mines&#40;matrix::Array&#41;
    flagged &#61; zeros&#40;Int,size&#40;matrix&#41;&#41;
    @inbounds for inds in Tuple.&#40;CartesianIndices&#40;matrix&#41;&#41;
        flagged&#91;inds...&#93; &#61; matrix&#91;inds...&#93; &#61;&#61; 1 ? -1 : sum&#40;window&#40;matrix,inds,ones&#40;Int,length&#40;size&#40;matrix&#41;&#41;&#41;&#41;&#41;
    end
    flagged
end</code></pre>
<ol start=23 >
<li><p>The cleanest minefield answer might be <code>OTDE</code>...</p>

</ol>
<pre><code class=language-julia >annotate&#40;minefield&#41; &#61; &#91;
    replace&#40;
        join&#40;
            w&#91;c&#93; &#61;&#61; &#39;*&#39; ? &#39;*&#39; :
            count&#40;get&#40;get&#40;minefield, y, &quot;&quot;&#41;, x, &quot;&quot;&#41; &#61;&#61; &#39;*&#39;
            for x in &#40;c - 1&#41;:&#40;c &#43; 1&#41;
                for y in &#40;r - 1&#41;:&#40;r &#43; 1&#41;
                    if x &#33;&#61; c || y &#33;&#61; r&#41;
        for c in 1:length&#40;w&#41;&#41;,
    &#39;0&#39; &#61;&gt; &#39; &#39;&#41;
    for &#40;r, w&#41; in enumerate&#40;minefield&#41;
&#93;</code></pre>
<p>Lessons:</p>
<ul>
<li><p>a nested generator can be quite powerful</p>

<li><p>don&#39;t be afraind to use dictionary combos with <code>for &#40;r, w&#41; in enumerate&#40;xs&#41;</code></p>

<li><p>This looks intimidating as hell. I don&#39;t think I could recode this in a few months.</p>

</ul>
<ol start=24 >
<li><p>DID NOT KNOW you could iterate a dictionary if you didn&#39;t care about order:</p>

</ol>
<pre><code class=language-julia >samples &#61; Dict&#40;
	&quot;I&quot; &#61;&gt; 1,
	&quot;II&quot; &#61;&gt; 2,
	&quot;V&quot; &#61;&gt; 5,
	&#41;
for sample in samples
	@test to_roman&#40;sample&#91;1&#93;&#41; &#61;&#61; sample&#91;2&#93;
end</code></pre>
<h3 id=12112020 ><a href="#12112020" class=header-anchor >12/11/2020</a></h3>
<ol start=17 >
<li><p>Invaluable git trick: if you committed some changes locally, but someone else pushed to master, use the <a href="https://cscheng.info/2017/01/26/git-tip-autostash-with-git-pull-rebase.html">auto-rebase autostash trick</a>:</p>

</ol>
<pre><code class=language-julia >git config --global pull.rebase true
git config --global rebase.atuoStash true</code></pre>
<p>so that you don&#39;t need to do <code>git pull --rebase --autostash</code> and can just <code>git pull</code>.</p>
<h3 id=08112020 ><a href="#08112020" class=header-anchor >08/11/2020</a></h3>
<ol start=10 >
<li><p>Try and order starter kit / computer parts from newegg.com</p>

<li><p>Before you spend a day trying to scrape / download files, make sure the author did not already kindly include a zipped version of the files :clown_face:</p>

<li><p>I think I found a possible thesis project - SymbolicUtils.jl as a backend for SymbolicTensors.jl. I should message the author and set something up.</p>

<li><p>Ran into rulebasedintegration.org. Downloaded the Mathematica notebooks, found a way to parse and dump them into text with PDFIO.jl.</p>

<li><p>Remembered how to setup an <code>artifact</code> with ArtifactUtils.jl. That thing is useful.</p>

<li><p>Found a killer command from SOverflow on how to recursively copy all files in a tree of folders that match an extension into a target directory:</p>

</ol>
<ul>
<li><p>whelp I think I lost it. Will fish it back but it was an easy google.</p>

</ul>
<ol start=16 >
<li><p>Polytomous recommended <a href=www.taguette.org >&quot;Taguette&quot;</a> for highlighting documents and its open source. Super cool&#33; Should send to Ponzi.</p>

</ol>
<h3 id=06112020 ><a href="#06112020" class=header-anchor >06/11/2020</a></h3>
<ol start=9 >
<li><p>If you want to make your startup super fast, use <code>PackageCompiler.jl</code>:</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; using PackageCompiler
julia&gt; create_sysimage&#40;&#91;:Revise, :OhMyREPL, :BenchmarkTools&#93;, replace_default &#61; true&#41;</code></pre>
<p>Super charge that combo with the <code>~/.julia/config/startup.jl</code>:</p>
<pre><code class=language-julia-repl >julia&gt; try
           using Revise
       catch e
	   @warn&#40;e&#41;
       end</code></pre>
<h3 id=04112020 ><a href="#04112020" class=header-anchor >04/11/2020</a></h3>
<ol start=7 >
<li><p>Trump is likely gonna lose the election - crazy times. Been working a bit on scaffolding for LightGraphsIO.jl. Solid integration with Parsers.jl will mean a lot of speed coming up for the LightGraphs.jl ecosystem.</p>

<li><p>In order to not get punked by the output of</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; print.&#40;sq&#40;i&#41; for i in 1:10&#41;
14916253649648110010-element Vector&#123;Nothing&#125;:
nothing
nothing
nothing
nothing
nothing
nothing
nothing
nothing
nothing
nothing</code></pre>
<p><code>@pabloferz</code> suggested the <code>foreach</code>, which returns a <code>nothing</code>, and thus doesn&#39;t print.</p>
<pre><code class=language-julia-repl >julia&gt; foreach&#40;x -&gt; println&#40;x^2&#41;, 1:3:7&#41;
1
9
49</code></pre>
<h3 id=31102020 ><a href="#31102020" class=header-anchor >31/10/2020</a></h3>
<ol start=6 >
<li><p>Today I finally got around to rewriting <code>GraphsIO.jl</code>. It suffered from a few ailments:</p>

</ol>
<ul>
<li><p>Very, very wonky pythonic dispatch</p>

<li><p>Small performance hits when writing &#40;ie, not using <code>io &#61; IOBuffer&#40;&#41;</code>, <code>write&#40;io, s1, s2&#41;</code> instead of the allocating <code>write&#40;io, &quot;&#36;s1&#36;s2&quot;&#41;</code>, etc.</p>

<li><p>Very awkward test scaffolding. Figuring out which functions are being called is just not fun.</p>

<li><p>Bulky directory structure. I&#39;ll just monorepo it for now and see what sticks.</p>

<li><p>Poor documentation.</p>

</ul>
<p>I adopted the <code>Blue Style</code> guidelines because they came in with PkgTemplates.jl and screw it, why not try and follow them. Here&#39;s what I got done today:</p>
<ul>
<li><p>Testing scaffolding mostly setup. &#40;Files, how to run the tests, etc.&#41;</p>

<li><p>Writing graphs in DOT, and I think 3 other formats.</p>

<li><p>Minor performance improvements.</p>

</ul>
<p>Tomorrow I should start something fun with the Parsers.jl library for maximum speedups. Wish me luck&#33;</p>
<h3 id=29102020 ><a href="#29102020" class=header-anchor >29/10/2020</a></h3>
<ol>
<li><p>Closures&#33; Defining a function within a function is a type of closure. They take variables from one scope above them. <code>@masonprotter</code> and <code>@fredrikekre</code> helped me figure out why having this is desirable:</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; function f&#40;x, y, z&#41;
           data &#61; compute&#40;x, y, z&#41;

           g&#40;&#41; &#61; data^2 # closure over data
           g&#40;&#41; # call g here maybe?
           # ...
           g&#40;&#41; # maybe again here?
end</code></pre>
<p>Mason says:&quot;Almost all usages of closures can be replaced with &#39;top level&#39; functions that take extra arguments &#40;one for each captured field&#41;, but it&#39;s syntactically less pleasing and can end up causing you to have a bunch of function names in your namespace you don&#39;t want.&quot; Of course <a href="https://discourse.julialang.org/t/closures-section-in-documentation-is-not-clear-enough/18717/13">there&#39;s a Discourse post on it</a>.</p>
<ol start=2 >
<li><p>Wow&#33; <a href="https://docs.julialang.org/en/v1/manual/functions/#Function-composition-and-piping">Function composition and piping</a> lets you do some amazing stuff with <code>\circ&lt;TAB&gt;</code> and friends&#33;</p>

</ol>
<pre><code class=language-julia-repl >julia&gt; &#40;sqrt ‚àò &#43;&#41;&#40;3, 6&#41;
3.0
julia&gt; map&#40;first ‚àò reverse ‚àò uppercase, split&#40;&quot;you can compose functions like this&quot;&#41;
6-element Array&#123;Char,1&#125;:
 &#39;U&#39;: ASCII/Unicode U&#43;0055 &#40;category Lu: Letter, uppercase&#41;
 &#39;N&#39;: ASCII/Unicode U&#43;004E &#40;category Lu: Letter, uppercase&#41;
 &#39;E&#39;: ASCII/Unicode U&#43;0045 &#40;category Lu: Letter, uppercase&#41;
...
julia&gt; 1:10 |&gt; sum |&gt; sqrt
7.416...
julia&gt; &#40;sqrt ‚àò sum&#41;&#40;1:10&#41;
7.41...
julia&gt; &#91; &quot;a&quot;, &quot;list&quot;, &quot;of&quot;, &quot;strings&quot;&#93; .|&gt; &#91;uppercase, reverse, titlecase, length&#93;
4-element Array&#123;Any,1&#125;:
  &quot;A&quot;
  &quot;tsil&quot;
  &quot;Of&quot;
 7
julia&gt; &#40;^2, sqrt, inv&#41;.&#40;&#91;2,4,4&#93;&#41;
&#91;4,2, .25&#93;</code></pre>
<ol start=3 >
<li><p>Rust allows for defining anonymous functions&#33;</p>

</ol>
<pre><code class=language-rust >fn raindrops&#40;n: u32&#41; -&gt; String &#123;
	let is_factor &#61; |f| x &#37; f &#61;&#61; 0;
	...
&#125;</code></pre>
<ol start=4 >
<li><p>Rust match is very powerful... try and setup the anonymous functions in a tuple after the <code>match</code> and then filter by <code>&#40;each, available, case&#41; &#61;&gt; action</code>.</p>

</ol>
<pre><code class=language-plaintext >pub fn raindrops&#40;num: i64&#41; -&gt; String &#123;
    let mut raindrop &#61; String::new&#40;&#41;;

    match &#40;num &#37; 3, num &#37; 5, num &#37; 7&#41; &#123;
        &#40;0, 0, 0&#41; &#61;&gt; raindrop.push_str&#40;&quot;PlingPlangPlong&quot;&#41;,
        &#40;0, 0, _&#41; &#61;&gt; raindrop.push_str&#40;&quot;PlingPlang&quot;&#41;,
        &#40;0, _, 0&#41; &#61;&gt; raindrop.push_str&#40;&quot;PlingPlong&quot;&#41;,
        &#40;_, 0, 0&#41; &#61;&gt; raindrop.push_str&#40;&quot;PlangPlong&quot;&#41;,
        &#40;0, _, _&#41; &#61;&gt; raindrop.push_str&#40;&quot;Pling&quot;&#41;,
        &#40;_, 0, _&#41; &#61;&gt; raindrop.push_str&#40;&quot;Plang&quot;&#41;,
        &#40;_, _, 0&#41; &#61;&gt; raindrop.push_str&#40;&quot;Plong&quot;&#41;,
        &#40;_, _, _&#41; &#61;&gt; raindrop &#61; num.to_string&#40;&#41;
    &#125;

    return raindrop
&#125;</code></pre>
<ol start=5 >
<li><p>This was a good use of match</p>

</ol>
<pre><code class=language-plaintext >pub fn square&#40;s: u32&#41; -&gt; u64 &#123;
    match s &#123;
        1...64 &#61;&gt; 1u64.wrapping_shl&#40;s-1&#41;,
// This also works
//      1u64 &lt;&lt; &#40;s - 1&#41;
        _ &#61;&gt; panic&#33;&#40;&quot;Square must be between 1 and 64&quot;&#41;,
    &#125;
&#125;

pub fn total&#40;&#41; -&gt; u64 &#123;
    &#40;1..65&#41;.map&#40;square&#41;.sum&#40;&#41;
// Lol thanks philip98
// u64::max_value
&#125;</code></pre>
<p>Credit to Wow-BOB-Wow.</p>
<h3 id=27102020 ><a href="#27102020" class=header-anchor >27/10/2020</a></h3>
<p>Today I got my website setup&#33;</p>
<div class=page-foot >
  <div class=copyright >
    &copy; Miguel Raz Guzm√°n Macedo. Last modified: June 06, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    
    
        <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

	

<script>
(function(){

	// Get the elements.
	// - the 'pre' element.
	// - the 'div' with the 'paste-content' id.

	var pre = document.getElementsByTagName('pre');

	// Add a copy button in the 'pre' element.
	// which only has the className of 'language-'.

	for (var i = 0; i < pre.length; i++) {
		var isLanguage = pre[i].children[0].className.indexOf('language-');

		if ( isLanguage === 0 ) {
			var button           = document.createElement('button');
					button.className = 'copy-button';
					button.textContent = 'Copy';

					pre[i].appendChild(button);
		}
	};

	// Run Clipboard

	var copyCode = new Clipboard('.copy-button', {
		target: function(trigger) {
			return trigger.previousElementSibling;
    }
	});

	// On success:
	// - Change the "Copy" text to "Copied".
	// - Swap it to "Copy" in 2s.
	// - Lead user to the "contenteditable" area with Velocity scroll.

	copyCode.on('success', function(event) {
		event.clearSelection();
		event.trigger.textContent = 'Copied';
		window.setTimeout(function() {
			event.trigger.textContent = 'Copy';
		}, 2000);

	});

	// On error (Safari):
	// - Change the  "Press Ctrl+C to copy"
	// - Swap it to "Copy" in 2s.

	copyCode.on('error', function(event) {
		event.trigger.textContent = 'Press "Ctrl + C" to copy';
		window.setTimeout(function() {
			event.trigger.textContent = 'Copy';
		}, 5000);
	});

})();
</script>